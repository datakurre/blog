<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}div.mermaid svg{height:auto !important;}</style><meta name="generator" content="Gatsby 5.2.0"/><meta name="author" content="Asko Soukka" data-gatsby-head="true"/><meta name="description" property="og:description" content="TL;DR; I forked
collective.transmogrifier
into just transmogrifier
(not yet released) to make its core usable without Plone dependencies,
use Chameleon for
TAL…" data-gatsby-head="true"/><meta name="title" property="og:title" content="Transmogrifier, the Python migration pipeline, also for Python 3" data-gatsby-head="true"/><meta name="type" property="og:type" content="website" data-gatsby-head="true"/><meta name="twitter:card" content="summary" data-gatsby-head="true"/><meta name="twitter:creator" content="Asko Soukka" data-gatsby-head="true"/><meta name="twitter:title" content="Transmogrifier, the Python migration pipeline, also for Python 3" data-gatsby-head="true"/><meta name="twitter:description" content="TL;DR; I forked
collective.transmogrifier
into just transmogrifier
(not yet released) to make its core usable without Plone dependencies,
use Chameleon for
TAL…" data-gatsby-head="true"/><meta name="image" property="og:image" content="https://datakurre.pandala.org/cover-2014-11-transmogrifier-python-migration.html.png" data-gatsby-head="true"/><meta name="twitter:image" content="https://datakurre.pandala.org/cover-2014-11-transmogrifier-python-migration.html.png" data-gatsby-head="true"/><meta name="theme-color" content="#663399"/><style data-href="/styles.5caeda19fca28245274c.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}.solarized.base03{color:#002b36}.solarized.base02{color:#073642}.solarized.base01{color:#586e75}.solarized.base00{color:#657b83}.solarized.base0{color:#839496}.solarized.base1{color:#93a1a1}.solarized.base2{color:#eee8d5}.solarized.base3{color:#fdf6e3}.solarized.solar-yellow{color:#b58900}.solarized.solar-orange{color:#cb4b16}.solarized.solar-red{color:#dc322f}.solarized.solar-magenta{color:#d33682}.solarized.solar-violet{color:#6c71c4}.solarized.solar-blue{color:#268bd2}.solarized.solar-cyan{color:#2aa198}.solarized.solar-green{color:#859900}.cm-s-solarized{color-profile:sRGB;rendering-intent:auto;line-height:1.45em}.cm-s-solarized.cm-s-dark{background-color:#002b36;color:#839496;text-shadow:#002b36 0 1px}.cm-s-solarized.cm-s-light{background-color:#fdf6e3;color:#657b83;text-shadow:#eee8d5 0 1px}.cm-s-solarized .CodeMirror-widget{text-shadow:none}.cm-s-solarized .cm-header{color:#586e75}.cm-s-solarized .cm-quote{color:#93a1a1}.cm-s-solarized .cm-keyword{color:#cb4b16}.cm-s-solarized .cm-atom,.cm-s-solarized .cm-number{color:#d33682}.cm-s-solarized .cm-def{color:#2aa198}.cm-s-solarized .cm-variable{color:#839496}.cm-s-solarized .cm-variable-2{color:#b58900}.cm-s-solarized .cm-type,.cm-s-solarized .cm-variable-3{color:#6c71c4}.cm-s-solarized .cm-property{color:#2aa198}.cm-s-solarized .cm-operator{color:#6c71c4}.cm-s-solarized .cm-comment{color:#586e75;font-style:italic}.cm-s-solarized .cm-string{color:#859900}.cm-s-solarized .cm-string-2{color:#b58900}.cm-s-solarized .cm-meta{color:#859900}.cm-s-solarized .cm-qualifier{color:#b58900}.cm-s-solarized .cm-builtin{color:#d33682}.cm-s-solarized .cm-bracket{color:#cb4b16}.cm-s-solarized .CodeMirror-matchingbracket{color:#859900}.cm-s-solarized .CodeMirror-nonmatchingbracket{color:#dc322f}.cm-s-solarized .cm-tag{color:#93a1a1}.cm-s-solarized .cm-attribute{color:#2aa198}.cm-s-solarized .cm-hr{border-top:1px solid #586e75;color:transparent;display:block}.cm-s-solarized .cm-link{color:#93a1a1;cursor:pointer}.cm-s-solarized .cm-special{color:#6c71c4}.cm-s-solarized .cm-em{color:#999;text-decoration:underline;text-decoration-style:dotted}.cm-s-solarized .cm-error,.cm-s-solarized .cm-invalidchar{border-bottom:1px dotted #dc322f;color:#586e75}.cm-s-solarized.cm-s-dark div.CodeMirror-selected{background:#073642}.cm-s-solarized.cm-s-dark.CodeMirror ::selection{background:rgba(7,54,66,.99)}.cm-s-dark .CodeMirror-line>span::-moz-selection,.cm-s-dark .CodeMirror-line>span>span::-moz-selection,.cm-s-solarized.cm-s-dark .CodeMirror-line::-moz-selection{background:rgba(7,54,66,.99)}.cm-s-solarized.cm-s-light div.CodeMirror-selected{background:#eee8d5}.cm-s-light .CodeMirror-line>span::selection,.cm-s-light .CodeMirror-line>span>span::selection,.cm-s-solarized.cm-s-light .CodeMirror-line::selection{background:#eee8d5}.cm-s-ligh .CodeMirror-line>span::-moz-selection,.cm-s-ligh .CodeMirror-line>span>span::-moz-selection,.cm-s-solarized.cm-s-light .CodeMirror-line::-moz-selection{background:#eee8d5}.cm-s-solarized.CodeMirror{box-shadow:inset 7px 0 12px -6px #000}.cm-s-solarized .CodeMirror-gutters{border-right:0}.cm-s-solarized.cm-s-dark .CodeMirror-gutters{background-color:#073642}.cm-s-solarized.cm-s-dark .CodeMirror-linenumber{color:#586e75;text-shadow:#021014 0 -1px}.cm-s-solarized.cm-s-light .CodeMirror-gutters{background-color:#eee8d5}.cm-s-solarized.cm-s-light .CodeMirror-linenumber{color:#839496}.cm-s-solarized .CodeMirror-linenumber{padding:0 5px}.cm-s-solarized .CodeMirror-guttermarker-subtle{color:#586e75}.cm-s-solarized.cm-s-dark .CodeMirror-guttermarker{color:#ddd}.cm-s-solarized.cm-s-light .CodeMirror-guttermarker{color:#cb4b16}.cm-s-solarized .CodeMirror-gutter .CodeMirror-gutter-text{color:#586e75}.cm-s-solarized .CodeMirror-cursor{border-left:1px solid #819090}.cm-s-solarized.cm-s-light.cm-fat-cursor .CodeMirror-cursor{background:#7e7}.cm-s-solarized.cm-s-light .cm-animate-fat-cursor{background-color:#7e7}.cm-s-solarized.cm-s-dark.cm-fat-cursor .CodeMirror-cursor{background:#586e75}.cm-s-solarized.cm-s-dark .cm-animate-fat-cursor{background-color:#586e75}.cm-s-solarized.cm-s-dark .CodeMirror-activeline-background{background:hsla(0,0%,100%,.06)}.cm-s-solarized.cm-s-light .CodeMirror-activeline-background{background:rgba(0,0,0,.06)}ol,ul{margin-left:1em}.gatsby-highlight{background:#fdfaf6;border-bottom:1px solid #eee;border-top:1px solid #eee;margin-bottom:1.75rem;overflow-x:auto;padding:1ex 1em}.gatsby-highlight pre{margin-bottom:0}</style><title data-gatsby-head="true">Transmogrifier, the Python migration pipeline, also for Python 3 | Asko Soukka</title><link rel="canonical" href="https://datakurre.pandala.org/2014/11/transmogrifier-python-migration.html/" data-gatsby-head="true"/><link rel="alternate" type="application/rss+xml" title="datakurre" href="/rss.xml"/><link rel="alternate" type="application/rss+xml" title="datakurre on &quot;plone&quot;" href="/feeds/posts/default/-/plone"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=b12376b9b88c2b74e77175e369294c9a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=b12376b9b88c2b74e77175e369294c9a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=b12376b9b88c2b74e77175e369294c9a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=b12376b9b88c2b74e77175e369294c9a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=b12376b9b88c2b74e77175e369294c9a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=b12376b9b88c2b74e77175e369294c9a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=b12376b9b88c2b74e77175e369294c9a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=b12376b9b88c2b74e77175e369294c9a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=b12376b9b88c2b74e77175e369294c9a"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">Asko Soukka</a></h3></header><main class="h-entry"><h1 style="margin-top:1.75rem;margin-bottom:0">Transmogrifier, the Python migration pipeline, also for Python 3</h1><span class="p-name" style="display:none">Transmogrifier, the Python migration pipeline, also for Python 3</span><img class="u-photo" src="https://datakurre.pandala.org/cover-2014-11-transmogrifier-python-migration.html.png" alt="" style="display:none"/><a class="p-author h-card" href="https://pandala.org/#datakurre" style="display:none"><img class="u-photo" src="https://datakurre.pandala.org/icon.jpg" alt=""/>Asko Soukka</a><div class="p-summary" style="display:none"><div>TL;DR; I forked
collective.transmogrifier
into just transmogrifier
(not yet released) to make its core usable without Plone dependencies,
use Chameleon for
TAL…</div></div><a class="p-category" href="https://datakurre.pandala.org/2014/11/transmogrifier-python-migration.html/" style="display:none">Migration</a><a class="p-category" href="https://datakurre.pandala.org/2014/11/transmogrifier-python-migration.html/" style="display:none">Plone</a><a class="p-category" href="https://datakurre.pandala.org/2014/11/transmogrifier-python-migration.html/" style="display:none">Python</a><a class="p-category" href="https://datakurre.pandala.org/2014/11/transmogrifier-python-migration.html/" style="display:none">Transmogrifier</a><a class="u-syndication" href="https://fed.brid.gy/" style="display:none">https://fed.brid.gy/</a><a class="u-syndication" href="https://fediverse.pandala.org/" style="display:none">https://fediverse.pandala.org/</a><a class="u-url u-uid" style="font-size:0.83255rem;line-height:1.75rem;display:block;color:black;box-shadow:none;margin-bottom:1.75rem" href="https://datakurre.pandala.org/2014/11/transmogrifier-python-migration.html/"><time class="dt-published" datetime="2014-11-19 06:00:00">November 19, 2014</time></a><div class="e-content"><div><p><strong>TL;DR;</strong> I forked
<a href="https://pypi.python.org/pypi/collective.transmogrifier">collective.transmogrifier</a>
into just <a href="https://github.com/datakurre/transmogrifier">transmogrifier</a>
(not yet released) to make its core usable without Plone dependencies,
use <a href="https://pypi.python.org/pypi/Chameleon">Chameleon</a> for
TAL-expressions, installable with just <code>pip install</code> and compatible with
Python 3.</p>
<p><a href="https://pypi.python.org/pypi/collective.transmogrifier">Transmogrifier</a>
is one of the many great developer tools by the
<a href="http://plone.org/">Plone</a> community. It’s a generic pipeline tool for
data manipulation, configurable with plain text
<a href="http://en.wikipedia.org/wiki/INI_file">INI-files</a>, while new re-usable
pipeline section blueprints can be implemented and packaged in Python.
It could be used to process any number of things, but historically it’s
been mainly developed and used as a pluggable way to import legacy
content into Plone.</p>
<p>A simple transmogrifier pipeline for dumping news from Slashdot to a CSV
file could look like:</p>
<div class="gatsby-highlight" data-language="properties">
      <pre class=" cm-s-solarized"><code><span class="cm-header">[transmogrifier]</span><span>
</span><span class="cm-def">pipeline </span><span>=</span><span>
</span><span class="cm-def">    from_rss</span><span>
</span><span class="cm-def">    to_csv</span><span>

</span><span class="cm-header">[from_rss]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> transmogrifier.from</span><span>
</span><span class="cm-def">modules </span><span>=</span><span class="cm-quote"> feedparser</span><span>
</span><span class="cm-def">expression </span><span>=</span><span class="cm-quote"> python</span><span>:</span><span class="cm-quote">modules['feedparser'].parse(options['url']).get('entries', [])</span><span>
</span><span class="cm-def">url </span><span>=</span><span class="cm-quote"> http</span><span>:</span><span class="cm-quote">//rss.slashdot.org/slashdot/slashdot</span><span>

</span><span class="cm-header">[to_csv]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> transmogrifier.to_csv</span><span>
</span><span class="cm-def">fieldnames </span><span>=</span><span>
</span><span class="cm-def">    title</span><span>
</span><span class="cm-def">    link</span><span>
</span><span class="cm-def">filename </span><span>=</span><span class="cm-quote"> slashdot.csv</span></code></pre>
    </div>
<p>Actually, in time of writing this, I’ve yet to do any Plone migrations
using transmogrifier. But when we recently had a reasonable size
non-Plone migration task, I knew not to re-invent the wheel, but to
transmogrify it. And we succeeded. Transmogrifier pipeline helped us to
design the migration better, and splitting data processing into multiple
pipeline sections helped us to delegate the work between multiple
developers.</p>
<p>Unfortunately, currently
<a href="https://pypi.python.org/pypi/collective.transmogrifier">collective.transmogrifier</a>
has unnecessary dependencies on
<a href="https://pypi.python.org/pypi/Products.CMFCore">CMFCore</a>, is not
installable without long known good set of versions and is missing any
built-int command-line interface. At first, I tried to do all the
necessary refactoring inside <strong>collective.transmogrifier</strong>, but
eventually a fork was required to make the transmogrifier core usable
outside Plone-environments, be compatible with Python 3 and to not break
any existing workflows depending on the old transmogrifier.</p>
<p>So, meet the new
<a href="https://github.com/datakurre/transmogrifier">transmogrifier</a>:</p>
<ul>
<li>can be installed with <code>pip install</code> (although, not yet released at
PyPI)</li>
<li>new <a href="https://pypi.python.org/pypi/mr.migrator">mr.migrator</a> inspired
command-line interface (see <code>transmogrif --help</code> for all the
options)</li>
<li>new base classes for custom blueprints
<ul>
<li><code>transmogrifier.blueprints.Blueprint</code></li>
<li><code>transmogrifier.blueprints.ConditionalBlueprint</code></li>
</ul>
</li>
<li>new ZCML-directives for registering blueprints and re-usable
pipelines
<ul>
<li><code>&#x3C;transmogrifier:blueprint component="" name="" /></code></li>
<li><code>&#x3C;transmogrifier:pipeline id="" name="" description="" configuration="" /></code></li>
</ul>
</li>
<li>uses <a href="https://pypi.python.org/pypi/Chameleon">Chameleon</a> for
TAL-expressions (e.g. in <code>ConditionalBlueprint</code>)</li>
<li>has only a few generic built-in blueprints</li>
<li>supports
<a href="https://pypi.python.org/pypi/z3c.autoinclude">z3c.autoinclude</a> for
package <em>transmogrifier</em></li>
<li>fully backwards compatible with blueprints for
<a href="https://pypi.python.org/pypi/collective.transmogrifier">collective.transmogrifier</a></li>
<li>runs with Python >= 2.6, including Python 3+</li>
</ul>
<p>There’s still much work to do before a real release (e.g. documenting
and testing the new CLI-script and new built-in blueprints), but let’s
still see how it works already…</p>
<p>P.S. Please, use a clean Python
<a href="https://pypi.python.org/pypi/virtualenv">virtualenv</a> for these
examples.</p>
<h2>Example pipeline</h2>
<p>Let’s start with an easy installation</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ pip</span><span> install </span><span class="cm-builtin">git</span><span class="cm-operator">+</span><span>https://github.com/datakurre/transmogrifier</span><span>
</span><span class="cm-def">$ transmogrify</span><span> </span><span class="cm-attribute">--help</span><span>
</span><span>Usage: transmogrify &lt;pipelines_and_overrides&gt;...</span><span>
</span><span>                </span><span class="cm-def">[--overrides</span><span class="cm-operator">=</span><span>overrides.cfg&gt;]</span><span>
</span><span>                </span><span class="cm-def">[--include</span><span class="cm-operator">=</span><span>package_or_module&gt;...]</span><span>
</span><span>                </span><span class="cm-def">[--include</span><span class="cm-operator">=</span><span>package:filename&gt;...]</span><span>
</span><span>                </span><span class="cm-def">[--context</span><span class="cm-operator">=</span><span>&lt;package.module.factory&gt;]</span><span>
</span><span>   transmogrify </span><span class="cm-attribute">--list</span><span>
</span><span>                </span><span class="cm-def">[--include</span><span class="cm-operator">=</span><span>package_or_module&gt;...]</span><span>
</span><span>   transmogrify </span><span class="cm-attribute">--show</span><span class="cm-operator">=</span><span>&lt;pipeline&gt;</span><span>
</span><span>                </span><span class="cm-def">[--include</span><span class="cm-operator">=</span><span>package_or_module&gt;...]</span></code></pre>
    </div>
<p>and with example filesystem <code>pipeline.cfg</code></p>
<div class="gatsby-highlight" data-language="properties">
      <pre class=" cm-s-solarized"><code><span class="cm-header">[transmogrifier]</span><span>
</span><span class="cm-def">pipeline </span><span>=</span><span>
</span><span class="cm-def">    from_rss</span><span>
</span><span class="cm-def">    to_csv</span><span>

</span><span class="cm-header">[from_rss]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> transmogrifier.from</span><span>
</span><span class="cm-def">modules </span><span>=</span><span class="cm-quote"> feedparser</span><span>
</span><span class="cm-def">expression </span><span>=</span><span class="cm-quote"> python</span><span>:</span><span class="cm-quote">modules['feedparser'].parse(options['url']).get('entries', [])</span><span>
</span><span class="cm-def">url </span><span>=</span><span class="cm-quote"> http</span><span>:</span><span class="cm-quote">//rss.slashdot.org/slashdot/slashdot</span><span>

</span><span class="cm-header">[to_csv]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> transmogrifier.to_csv</span><span>
</span><span class="cm-def">fieldnames </span><span>=</span><span>
</span><span class="cm-def">    title</span><span>
</span><span class="cm-def">    link</span><span>
</span><span class="cm-def">filename </span><span>=</span><span class="cm-quote"> slashdot.csv</span></code></pre>
    </div>
<p>and its dependencies</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ pip</span><span> install feedparser</span></code></pre>
    </div>
<p>and the results</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ transmogrify</span><span> pipeline.cfg</span><span>
</span><span>INFO:transmogrifier:CSVConstructor:to_csv wrote </span><span class="cm-number">25</span><span> items to /.../slashdot.csv</span></code></pre>
    </div>
<p>using, for example, Python 2.7 or Python 3.4.</p>
<h2>Minimal migration project</h2>
<p>Let’s create an example migration project with custom blueprints using
Python 3. In addition to
<a href="https://github.com/datakurre/transmogrifier">transmogrifier</a>, we need
<a href="https://pypi.python.org/pypi/venusianconfiguration">venusianconfiguration</a>
for easy blueprint registration and, of course, actual depedencies for
our blueprints:</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ pip</span><span> install </span><span class="cm-builtin">git</span><span class="cm-operator">+</span><span>https://github.com/datakurre/transmogrifier</span><span>
</span><span class="cm-def">$ pip</span><span> install </span><span class="cm-builtin">git</span><span class="cm-operator">+</span><span>https://github.com/datakurre/venusianconfiguration</span><span>
</span><span class="cm-def">$ pip</span><span> install fake-factory</span></code></pre>
    </div>
<p>Now we can implement custom blueprints in, for example, <code>blueprints.py</code></p>
<div class="gatsby-highlight" data-language="python">
      <pre class=" cm-s-solarized"><code><span class="cm-keyword">from</span><span> </span><span class="cm-variable">venusianconfiguration</span><span> </span><span class="cm-keyword">import</span><span> </span><span class="cm-variable">configure</span><span>

</span><span class="cm-keyword">from</span><span> </span><span class="cm-variable">transmogrifier</span><span>.</span><span class="cm-property">blueprints</span><span> </span><span class="cm-keyword">import</span><span> </span><span class="cm-variable">Blueprint</span><span>
</span><span class="cm-keyword">from</span><span> </span><span class="cm-variable">faker</span><span> </span><span class="cm-keyword">import</span><span> </span><span class="cm-variable">Faker</span><span>


</span><span class="cm-meta">@configure</span><span>.</span><span class="cm-property">transmogrifier</span><span>.</span><span class="cm-property">blueprint</span><span>.</span><span class="cm-property">component</span><span>(</span><span class="cm-variable">name</span><span class="cm-operator">=</span><span class="cm-string">'faker_contacts'</span><span>)</span><span>
</span><span class="cm-keyword">class</span><span> </span><span class="cm-def">FakerContacts</span><span>(</span><span class="cm-variable">Blueprint</span><span>):</span><span>
</span><span>    </span><span class="cm-keyword">def</span><span> </span><span class="cm-def">__iter__</span><span>(</span><span class="cm-variable-2">self</span><span>):</span><span>
</span><span>        </span><span class="cm-keyword">for</span><span> </span><span class="cm-variable">item</span><span> </span><span class="cm-keyword">in</span><span> </span><span class="cm-variable-2">self</span><span>.</span><span class="cm-property">previous</span><span>:</span><span>
</span><span>            </span><span class="cm-keyword">yield</span><span> </span><span class="cm-variable">item</span><span>

</span><span>        </span><span class="cm-variable">amount</span><span> </span><span class="cm-operator">=</span><span> </span><span class="cm-builtin">int</span><span>(</span><span class="cm-variable-2">self</span><span>.</span><span class="cm-property">options</span><span>.</span><span class="cm-property">get</span><span>(</span><span class="cm-string">'amount'</span><span>, </span><span class="cm-string">'0'</span><span>))</span><span>
</span><span>        </span><span class="cm-variable">fake</span><span> </span><span class="cm-operator">=</span><span> </span><span class="cm-variable">Faker</span><span>()</span><span>

</span><span>        </span><span class="cm-keyword">for</span><span> </span><span class="cm-variable">i</span><span> </span><span class="cm-keyword">in</span><span> </span><span class="cm-builtin">range</span><span>(</span><span class="cm-variable">amount</span><span>):</span><span>
</span><span>            </span><span class="cm-keyword">yield</span><span> {</span><span>
</span><span>                </span><span class="cm-string">'name'</span><span>: </span><span class="cm-variable">fake</span><span>.</span><span class="cm-property">name</span><span>(),</span><span>
</span><span>                </span><span class="cm-string">'address'</span><span>: </span><span class="cm-variable">fake</span><span>.</span><span class="cm-property">address</span><span>()</span><span>
</span><span>            }</span></code></pre>
    </div>
<p>and see them registered next to the built-in ones (or from the other
packages hooking into transmogrifier autoinclude entry-point):</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ transmogrify</span><span> </span><span class="cm-attribute">--list</span><span> </span><span class="cm-attribute">--include</span><span class="cm-operator">=</span><span>blueprints</span><span>

</span><span>Available blueprints</span><span>
</span><span class="cm-attribute">--------------------</span><span>
</span><span>faker_contacts</span><span>
</span><span>...</span></code></pre>
    </div>
<p>Now, we can make an example <code>pipeline.cfg</code></p>
<div class="gatsby-highlight" data-language="properties">
      <pre class=" cm-s-solarized"><code><span class="cm-header">[transmogrifier]</span><span>
</span><span class="cm-def">pipeline </span><span>=</span><span>
</span><span class="cm-def">    from_faker</span><span>
</span><span class="cm-def">    to_csv</span><span>

</span><span class="cm-header">[from_faker]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> faker_contacts</span><span>
</span><span class="cm-def">amount </span><span>=</span><span class="cm-quote"> 2</span><span>

</span><span class="cm-header">[to_csv]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> transmogrifier.to_csv</span></code></pre>
    </div>
<p>and enjoy the results</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ transmogrify</span><span> pipeline.cfg to_csv</span><span class="cm-def">:filename</span><span class="cm-operator">=</span><span class="cm-attribute">-</span><span> </span><span class="cm-attribute">--include</span><span class="cm-operator">=</span><span>blueprints</span><span>
</span><span>address,name</span><span>
</span><span class="cm-string">"534 Hintz Inlet Apt. 804</span><span>
</span><span class="cm-string">Schneiderchester, MI 55300"</span><span>,Dr. Garland Wyman</span><span>
</span><span class="cm-string">"44608 Volkman Islands</span><span>
</span><span class="cm-string">Maryleefurt, AK 42163"</span><span>,Mrs. Franc Price DVM</span><span>
</span><span>INFO:transmogrifier:CSVConstructor:to_csv saved </span><span class="cm-number">2</span><span> items to </span><span class="cm-attribute">-</span></code></pre>
    </div>
<p>An alternative would be to just use the shipped
<a href="https://pypi.python.org/pypi/mr.bob">mr.bob</a>-template…</p>
<h2>Migration project using the template</h2>
<p>The new <a href="https://github.com/datakurre/transmogrifier">transmogrifier</a>
ships with an easy getting started template for your custom migration
project. To use the template, you need a Python environment with
<a href="https://pypi.python.org/pypi/mr.bob">mr.bob</a> and the new
transmogrifier:</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ pip</span><span> install mr.bob readline  </span><span class="cm-comment"># readline is an implicit mr.bob dependency</span><span>
</span><span class="cm-def">$ pip</span><span> install </span><span class="cm-builtin">git</span><span class="cm-operator">+</span><span>https://github.com/datakurre/transmogrifier</span></code></pre>
    </div>
<p>Then you can create a new project directory with:</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ mrbob</span><span> bobtemplates.transmogrifier:project</span></code></pre>
    </div>
<p>Once the new project directory is created, inside the directory, you can
install rest of the depdendencies and activate the project with:</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ pip</span><span> install </span><span class="cm-attribute">-r</span><span> requirements.txt</span><span>
</span><span class="cm-def">$ python</span><span> setup.py develop</span></code></pre>
    </div>
<p>Now transmogrify knows your project’s custom blueprints and pipelines:</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ transmogrify</span><span> </span><span class="cm-attribute">--list</span><span>

</span><span>Available blueprints</span><span>
</span><span class="cm-attribute">--------------------</span><span>
</span><span>myprojectname.mock_contacts</span><span>
</span><span>...</span><span>

</span><span>Available pipelines</span><span>
</span><span class="cm-attribute">-------------------</span><span>
</span><span>myprojectname_example</span><span>
</span><span>    Example: Generates uppercase mock addresses</span></code></pre>
    </div>
<p>And the example pipeline can be executed with:</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ transmogrify</span><span> myprojectname_example</span><span>
</span><span>name,address</span><span>
</span><span>ISSAC KOSS I,</span><span class="cm-string">"PSC 8465, BOX 1625</span><span>
</span><span class="cm-string">APO AE 97751"</span><span>
</span><span>TESS FAHEY,</span><span class="cm-string">"PSC 7387, BOX 3736</span><span>
</span><span class="cm-string">APO AP 13098-6260"</span><span>
</span><span>INFO:transmogrifier:CSVConstructor:to_csv wrote </span><span class="cm-number">2</span><span> items to </span><span class="cm-attribute">-</span></code></pre>
    </div>
<p>Please, see created <code>README.rst</code> for how to edit the example blueprints
and pipelines and create more.</p>
<h2>Mandatory example with Plone</h2>
<p>Using the new
<a href="https://github.com/datakurre/transmogrifier">transmogrifier</a> with Plone
should be as simply as adding it into your <code>buildout.cfg</code> next to the
old transmogrifier packages:</p>
<div class="gatsby-highlight" data-language="properties">
      <pre class=" cm-s-solarized"><code><span class="cm-header">[buildout]</span><span>
</span><span class="cm-def">extends </span><span>=</span><span class="cm-quote"> http</span><span>:</span><span class="cm-quote">//dist.plone.org/release/4.3-latest/versions.cfg</span><span>
</span><span class="cm-def">parts </span><span>=</span><span class="cm-quote"> instance plonesite</span><span>
</span><span class="cm-def">versions </span><span>=</span><span class="cm-quote"> versions</span><span>

</span><span class="cm-def">extensions </span><span>=</span><span class="cm-quote"> mr.developer</span><span>
</span><span class="cm-def">soures </span><span>=</span><span class="cm-quote"> sources</span><span>
</span><span class="cm-def">auto-checkout </span><span>=</span><span class="cm-quote"> *</span><span>

</span><span class="cm-header">[sources]</span><span>
</span><span class="cm-def">transmogrifier </span><span>=</span><span class="cm-quote"> git https</span><span>:</span><span class="cm-quote">//github.com/datakurre/transmogrifier</span><span>

</span><span class="cm-header">[instance]</span><span>
</span><span class="cm-def">recipe </span><span>=</span><span class="cm-quote"> plone.recipe.zope2instance</span><span>
</span><span class="cm-def">eggs </span><span>=</span><span>
</span><span class="cm-def">    Plone</span><span>
</span><span class="cm-def">    z3c.pt</span><span>
</span><span class="cm-def">    transmogrifier</span><span>
</span><span class="cm-def">    collective.transmogrifier</span><span>
</span><span class="cm-def">    plone.app.transmogrifier</span><span>
</span><span class="cm-def">user </span><span>=</span><span class="cm-quote"> admin</span><span>:</span><span class="cm-quote">admin</span><span>
</span><span class="cm-def">zcml </span><span>=</span><span class="cm-quote"> plone.app.transmogrifier</span><span>

</span><span class="cm-header">[plonesite]</span><span>
</span><span class="cm-def">recipe </span><span>=</span><span class="cm-quote"> collective.recipe.plonesite</span><span>
</span><span class="cm-def">site-id </span><span>=</span><span class="cm-quote"> Plone</span><span>
</span><span class="cm-def">instance </span><span>=</span><span class="cm-quote"> instance</span><span>

</span><span class="cm-header">[versions]</span><span>
</span><span class="cm-def">future </span><span>=</span><span>
</span><span class="cm-def">setuptools </span><span>=</span><span>
</span><span class="cm-def">zc.buildout </span><span>=</span></code></pre>
    </div>
<p>Let’s also write a fictional migration pipeline, which would create
Plone content from Slashdot RSS-feed:</p>
<div class="gatsby-highlight" data-language="properties">
      <pre class=" cm-s-solarized"><code><span class="cm-header">[transmogrifier]</span><span>
</span><span class="cm-def">pipeline </span><span>=</span><span>
</span><span class="cm-def">    from_rss</span><span>
</span><span class="cm-def">    id</span><span>
</span><span class="cm-def">    fields</span><span>
</span><span class="cm-def">    folders</span><span>
</span><span class="cm-def">    create</span><span>
</span><span class="cm-def">    update</span><span>
</span><span class="cm-def">    commit</span><span>

</span><span class="cm-header">[from_rss]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> transmogrifier.from</span><span>
</span><span class="cm-def">modules </span><span>=</span><span class="cm-quote"> feedparser</span><span>
</span><span class="cm-def">expression </span><span>=</span><span class="cm-quote"> python</span><span>:</span><span class="cm-quote">modules['feedparser'].parse(options['url']).get('entries', [])</span><span>
</span><span class="cm-def">url </span><span>=</span><span class="cm-quote"> http</span><span>:</span><span class="cm-quote">//rss.slashdot.org/Slashdot/slashdot</span><span>

</span><span class="cm-header">[id]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> transmogrifier.set</span><span>
</span><span class="cm-def">modules </span><span>=</span><span class="cm-quote"> uuid</span><span>
</span><span class="cm-def">id </span><span>=</span><span class="cm-quote"> python</span><span>:</span><span class="cm-quote">str(modules['uuid'].uuid4())</span><span>

</span><span class="cm-header">[fields]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> transmogrifier.set</span><span>
</span><span class="cm-def">portal_type </span><span>=</span><span class="cm-quote"> string</span><span>:</span><span class="cm-quote">Document</span><span>
</span><span class="cm-def">text </span><span>=</span><span class="cm-quote"> path</span><span>:</span><span class="cm-quote">item/summary</span><span>
</span><span class="cm-def">_path </span><span>=</span><span class="cm-quote"> string</span><span>:</span><span class="cm-quote">slashdot/${item['id']}</span><span>

</span><span class="cm-header">[folders]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> collective.transmogrifier.sections.folders</span><span>

</span><span class="cm-header">[create]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> collective.transmogrifier.sections.constructor</span><span>

</span><span class="cm-header">[update]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> plone.app.transmogrifier.atschemaupdater</span><span>

</span><span class="cm-header">[commit]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> transmogrifier.transform</span><span>
</span><span class="cm-def">modules </span><span>=</span><span class="cm-quote"> transaction</span><span>
</span><span class="cm-def">commit </span><span>=</span><span class="cm-quote"> modules['transaction'].commit()</span></code></pre>
    </div>
<p>Now, the new CLI-script can be used together with
<code>bin/instance -Ositeid run</code> provided by
<a href="https://pypi.python.org/pypi/plone.recipe.zope2instance">plone.recipe.zope2instance</a>
so that transmogrifier will get your site as its context simply by
calling `zope.component.hooks.getSite`:</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ bin</span><span>/instance </span><span class="cm-attribute">-OPlone</span><span> run bin/transmogrify pipeline.cfg </span><span class="cm-attribute">--context</span><span class="cm-operator">=</span><span>zope.component.hooks.getSite</span></code></pre>
    </div>
<p>With Plone you should, of course, still use Python 2.7.</p>
<h2>Funnelweb example with Plone</h2>
<p><a href="https://pypi.org/project/funnelweb/">Funnelweb</a> is a collection of transmogrifier blueprints an pipelines
for scraping any web site into Plone. I heard that its example pipelines
are a little outdated, but they make a nice demo anywyay.</p>
<p>Let’s extend our previous Plone-example with the following
<code>funnelweb.cfg</code> buildout to include all the necessary transmogrifier
blueprints and the example <code>funnelweb.ttw</code> pipeline:</p>
<div class="gatsby-highlight" data-language="properties">
      <pre class=" cm-s-solarized"><code><span class="cm-header">[buildout]</span><span>
</span><span class="cm-def">extends </span><span>=</span><span class="cm-quote"> buildout.cfg</span><span>

</span><span class="cm-header">[instance]</span><span>
</span><span class="cm-def">eggs +</span><span>=</span><span>
</span><span class="cm-def">    transmogrify.pathsorter</span><span>
</span><span class="cm-def">    funnelweb</span></code></pre>
    </div>
<p>We also need a small additional pipeline <code>commit.cfg</code> to commit all the
changes made by <code>funnelweb.ttw</code>:</p>
<div class="gatsby-highlight" data-language="properties">
      <pre class=" cm-s-solarized"><code><span class="cm-header">[transmogrifier]</span><span>
</span><span class="cm-def">pipeline </span><span>=</span><span class="cm-quote"> commit</span><span>

</span><span class="cm-header">[commit]</span><span>
</span><span class="cm-def">blueprint </span><span>=</span><span class="cm-quote"> transmogrifier.interval</span><span>
</span><span class="cm-def">modules </span><span>=</span><span class="cm-quote"> transaction</span><span>
</span><span class="cm-def">expression </span><span>=</span><span class="cm-quote"> python</span><span>:</span><span class="cm-quote">modules['transaction'].commit()</span></code></pre>
    </div>
<p>Now, after the buildout has been run, the following command would use
pipelines <code>funnelweb.ttw</code> and <code>commit.cfg</code> to somewhat scrape my blog
into Plone:</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ bin</span><span>/instance </span><span class="cm-attribute">-OPlone</span><span> run bin/transmogrify funnelweb.ttw commit.cfg crawler</span><span class="cm-def">:url</span><span class="cm-operator">=</span><span>http://datakurre.pandala.org </span><span class="cm-string">"crawler:ignore=feeds\ncsi.js"</span><span> </span><span class="cm-attribute">--context</span><span class="cm-operator">=</span><span>zope.component.hooks.getSite</span></code></pre>
    </div>
<p>For tuning the import further, the used pipelines could be easily
exported into filesystem, customized, and then executed similarly to
<code>commit.cfg</code>:</p>
<div class="gatsby-highlight" data-language="shell">
      <pre class=" cm-s-solarized"><code><span class="cm-def">$ bin</span><span>/instance </span><span class="cm-attribute">-OPlone</span><span> run bin/transmogrify </span><span class="cm-attribute">--show</span><span class="cm-operator">=</span><span>funnelweb.ttw &gt; myfunnelweb.cfg</span></code></pre>
    </div></div></div><hr style="margin-bottom:1.75rem"/><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/2014/10/too-many-ways-to-do-async-tasks-with.html/">← <!-- -->Too many ways to do async tasks with Plone</a></li><li><a rel="next" href="/2015/05/plonecustom-for-plone-5.html/">ploneCustom for Plone 5<!-- --> →</a></li></ul></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2014/11/transmogrifier-python-migration.html/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-8e352158238d7a981d99.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-97805cac34ee32fd2ff3.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-d702b3556e2e37664238.js\"],\"component---src-templates-blog-post-js\":[\"/component---src-templates-blog-post-js-db3b846139cc4b35992f.js\"],\"component---src-templates-follow-js\":[\"/component---src-templates-follow-js-48b9dd3d02ab9724ef8f.js\"],\"component---src-templates-like-js\":[\"/component---src-templates-like-js-8481525f17b37bf9ff44.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="1117cca6506347fc7992";</script><script src="/webpack-runtime-e10ad14bfe4fe997f9f6.js" async></script><script src="/framework-a3d1aa3677a1ff482f17.js" async></script><script src="/app-8e352158238d7a981d99.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>