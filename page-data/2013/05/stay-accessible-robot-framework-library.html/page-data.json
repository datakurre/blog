{"componentChunkName":"component---src-templates-blog-post-js","path":"/2013/05/stay-accessible-robot-framework-library.html/","result":{"data":{"site":{"siteMetadata":{"title":"Asko Soukka","author":"Asko Soukka"}},"markdownRemark":{"id":"f74d80c3-1e7a-5d53-9ea7-24d5eef9b2d1","fields":{"slug":"/2013/05/stay-accessible-robot-framework-library.html/"},"excerpt":"WAVE Web Accessibility Tool is a popular\nservice for detecting accessibility issues on your websites. WAVE\nToolbar is an offline version of the\nservice…","html":"<p><a href=\"http://wave.webaim.org/\">WAVE Web Accessibility Tool</a> is a popular\nservice for detecting accessibility issues on your websites. <a href=\"http://wave.webaim.org/toolbar/\">WAVE\nToolbar</a> is an <em>offline</em> version of the\nservice, distributed as a downloadable, self-installable, Firefox\nadd-on. Both the service and the toolbar are produced and copyrighted by\n<a href=\"http://webaim.org/\">WebAIM</a> a US based non-profit organization, but are\nusable without cost.</p>\n<p>During <a href=\"http://www.abstract.it/en/abstract/initiative/plog-2013\">the last\nPLOG</a> I was\nasked by <a href=\"http://twitter.com/polyester\">Paul</a>, if it would be possible\nto automate WAVE Toolbar -powered accessibility checks with <a href=\"http://robotframework.org/\">Robot\nFramework</a> (and its\n<a href=\"http://pypi.python.org/pypi/robotframework-selenium2library\">Selenium-library</a>).\nLuckily, it seems to be:</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 75%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <p style=\"text-align: center;\"><iframe src=\"http://www.youtube.com/embed/wfNpwCTu_HI\" frameborder=\"0\" allowfullscreen=\"\" style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe></p> </div>\n<h2>robotframework-wavelibrary</h2>\n<p><strong>WAVELibrary</strong> is a new Robot Framework library, packaged as\n<a href=\"http://pypi.python.org/pypi/robotframework-wavelibrary\">robotframework-wavelibrary</a>,\nto provide keywords for executing WAVE Toolbar accessibility analysis\ndirectly withing Robot Framework tests.</p>\n<p>Together with the Selenium-library, it allows you to prepare any test\nsituation on your web product (e.g. login and open some form), execute\nWAVE-analysis and either pass or fail the test according to the results.\nAnd those tests can also be integrated with your CI to avoid\naccidentally introducing new accessibility issues.</p>\n<p><strong>WAVELibrary</strong> is open source, so if its current features are not\nenough, thanks to Robot Framework syntax, you can easily <a href=\"http://github.com/datakurre/robotframework-wavelibrary/\">contribute and\nmake it\nbetter</a>.</p>\n<p><em>(Please, note that you should not solely rely only on WAVE Toolbar for\nvalidating your products accessibility, because accessibility should\nalways be verified by a human. Yet, WAVE Toolbar could assist you on\ndetecting possible accessibility issues, WAVELibrary could help in\nautomating that, and once you are accessible, WAVE Toolbar and\nWAVELibrary together can help you to stay accessible.)</em></p>\n<h2>Basic usage</h2>\n<h3>./bootstrap.py</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ curl</span><span> </span><span class=\"cm-attribute\">-O</span><span> http://downloads.buildout.org/2/bootstrap.py</span></code></pre>\n    </div>\n<h3>./buildout.cfg</h3>\n<div class=\"gatsby-highlight\" data-language=\"properties\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-header\">[buildout]</span><span>\n</span><span class=\"cm-def\">parts </span><span>=</span><span class=\"cm-quote\"> pybot</span><span>\n\n</span><span class=\"cm-header\">[pybot]</span><span>\n</span><span class=\"cm-def\">recipe </span><span>=</span><span class=\"cm-quote\"> zc.recipe.egg</span><span>\n</span><span class=\"cm-def\">eggs </span><span>=</span><span>\n</span><span class=\"cm-def\">     robotframework</span><span>\n</span><span class=\"cm-def\">     robotframework-wavelibrary</span></code></pre>\n    </div>\n<h3>./example.robot</h3>\n<div class=\"gatsby-highlight\" data-language=\"robotframework\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-header\">*** Settings ***</span><span>\n\n</span><span class=\"cm-meta\">Library</span><span>  </span><span class=\"cm-string\">WAVELibrary</span><span>\n\n</span><span class=\"cm-meta\">Suite setup</span><span>  </span><span class=\"cm-keyword\">Open</span><span> </span><span class=\"cm-keyword\">WAVE</span><span> </span><span class=\"cm-keyword\">browser</span><span>\n</span><span class=\"cm-meta\">Suite teardown</span><span>  </span><span class=\"cm-keyword\">Close</span><span> </span><span class=\"cm-keyword\">all</span><span> </span><span class=\"cm-keyword\">browsers</span><span>\n\n</span><span class=\"cm-header\">*** Test Cases ***</span><span>\n\n</span><span class=\"cm-string header\">Test single page</span><span>\n</span><span>    </span><span class=\"cm-meta\">[Documentation]</span><span>  </span><span class=\"cm-string\">Single</span><span> </span><span class=\"cm-string\">page</span><span> </span><span class=\"cm-string\">test</span><span> </span><span class=\"cm-string\">could</span><span> </span><span class=\"cm-string\">interact</span><span> </span><span class=\"cm-string\">with</span><span> </span><span class=\"cm-string\">the</span><span> </span><span class=\"cm-string\">target</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>              </span><span class=\"cm-string\">app</span><span> </span><span class=\"cm-string\">as</span><span> </span><span class=\"cm-string\">much</span><span> </span><span class=\"cm-string\">as</span><span> </span><span class=\"cm-string\">required</span><span> </span><span class=\"cm-string\">and</span><span> </span><span class=\"cm-string\">end</span><span> </span><span class=\"cm-string\">with</span><span> </span><span class=\"cm-string\">triggering</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>              </span><span class=\"cm-string\">the</span><span> </span><span class=\"cm-string\">accessibility</span><span> </span><span class=\"cm-string\">scan.</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Go</span><span> </span><span class=\"cm-keyword\">to</span><span>  </span><span class=\"cm-string\">http://www.plone.org/</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Check</span><span> </span><span class=\"cm-keyword\">accessibility</span><span> </span><span class=\"cm-keyword\">errors</span><span>\n\n</span><span class=\"cm-string header\">Test multiple pages</span><span>\n</span><span>    </span><span class=\"cm-meta\">[Documentation]</span><span>  </span><span class=\"cm-string\">Template</span><span> </span><span class=\"cm-string\">based</span><span> </span><span class=\"cm-string\">test</span><span> </span><span class=\"cm-string\">can,</span><span> </span><span class=\"cm-string\">for</span><span> </span><span class=\"cm-string\">example,</span><span> </span><span class=\"cm-string\">take</span><span> </span><span class=\"cm-string\">a</span><span> </span><span class=\"cm-string\">list</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>              </span><span class=\"cm-string\">of</span><span> </span><span class=\"cm-string\">URLs</span><span> </span><span class=\"cm-string\">and</span><span> </span><span class=\"cm-string\">perform</span><span> </span><span class=\"cm-string\">accessibility</span><span> </span><span class=\"cm-string\">scan</span><span> </span><span class=\"cm-string\">for</span><span> </span><span class=\"cm-string\">all</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>              </span><span class=\"cm-string\">of</span><span> </span><span class=\"cm-string\">them.</span><span> </span><span class=\"cm-string\">While</span><span> </span><span class=\"cm-string\">regular</span><span> </span><span class=\"cm-string\">test</span><span> </span><span class=\"cm-string\">would</span><span> </span><span class=\"cm-string\">stop</span><span> </span><span class=\"cm-string\">for</span><span> </span><span class=\"cm-string\">the</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>              </span><span class=\"cm-string\">first</span><span> </span><span class=\"cm-string\">failure,</span><span> </span><span class=\"cm-string\">template</span><span> </span><span class=\"cm-string\">based</span><span> </span><span class=\"cm-string\">test</span><span> </span><span class=\"cm-string\">will</span><span> </span><span class=\"cm-string\">just</span><span> </span><span class=\"cm-string\">jump</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>              </span><span class=\"cm-string\">to</span><span> </span><span class=\"cm-string\">the</span><span> </span><span class=\"cm-string\">next</span><span> </span><span class=\"cm-string\">URL</span><span> </span><span class=\"cm-string\">(but</span><span> </span><span class=\"cm-string\">all</span><span> </span><span class=\"cm-string\">failures</span><span> </span><span class=\"cm-string\">will</span><span> </span><span class=\"cm-string\">be</span><span> </span><span class=\"cm-string\">reported).</span><span>\n</span><span class=\"cm-bracket\">    </span><span class=\"cm-meta\">[Template]</span><span class=\"cm-bracket\">  </span><span class=\"cm-keyword\">Check</span><span> </span><span class=\"cm-keyword\">URL</span><span> </span><span class=\"cm-keyword\">for</span><span> </span><span class=\"cm-keyword\">accessibility</span><span> </span><span class=\"cm-keyword\">errors</span><span>\n</span><span>    </span><span class=\"cm-keyword\">http://www.plone.org/</span><span>\n</span><span>    </span><span class=\"cm-keyword\">http://www.drupal.org/</span><span>\n</span><span>    </span><span class=\"cm-keyword\">http://www.joomla.org/</span><span>\n</span><span>    </span><span class=\"cm-keyword\">http://www.wordpress.org/</span></code></pre>\n    </div>\n<p>See also all <a href=\"http://robot-framework-wave-library.readthedocs.org/\">the available\nkeywords</a>. (in\naddition to <a href=\"http://robotframework.googlecode.com/hg/doc/libraries/BuiltIn.html?r=2.7.7\">robot\nkeywords</a>\nand <a href=\"http://rtomac.github.com/robotframework-selenium2library/doc/Selenium2Library.html\">selenium\nkeywords</a>).</p>\n<h3>Installing</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ python</span><span> bootstrap.py</span><span>\n</span><span class=\"cm-def\">$ bin</span><span>/buildout</span></code></pre>\n    </div>\n<h3>Running</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ bin</span><span>/pybot example.robot</span><span>\n\n</span><span class=\"cm-operator\">==============================================================================</span><span>\n</span><span>Example</span><span>\n</span><span class=\"cm-operator\">==============================================================================</span><span>\n</span><span>Test single page :: Single page test could interact with the target   | PASS |</span><span>\n</span><span class=\"cm-attribute\">------------------------------------------------------------------------------</span><span>\n</span><span>Test multiple pages :: Template based test can, </span><span class=\"cm-keyword\">for</span><span> example, take ... | FAIL |</span><span>\n</span><span>Wave reported errors </span><span class=\"cm-keyword\">for</span><span> http://wordpress.org/: ERROR: Form label missing !</span><span class=\"cm-operator\">=</span><span>\n</span><span class=\"cm-attribute\">------------------------------------------------------------------------------</span><span>\n</span><span>Example                                                               | FAIL |</span><span>\n</span><span class=\"cm-number\">2</span><span> critical tests, </span><span class=\"cm-number\">1</span><span> passed, </span><span class=\"cm-number\">1</span><span> failed</span><span>\n</span><span class=\"cm-number\">2</span><span> tests total, </span><span class=\"cm-number\">1</span><span> passed, </span><span class=\"cm-number\">1</span><span> failed</span><span>\n</span><span class=\"cm-operator\">==============================================================================</span><span>\n</span><span>Output:  /.../output.xml</span><span>\n</span><span>Log:     /.../log.html</span><span>\n</span><span>Report:  /.../report.html</span></code></pre>\n    </div>\n<p>In addition to generated Robot Framework test report and log, there\nshould be WAVE Toolbar -annotated screenshot of each tested page and\nWAVELibrary also tries to take a cropped screenshot of each visible\naccessibility error found on the page.</p>\n<h2>Plone usage</h2>\n<p>While WAVELibrary has no dependencies on Plone, it’s tailored to work\nwell with\n<a href=\"http://pypi.python.org/pypi/plone.app.robotframework\">plone.app.robotframework</a>\nso that it’s easy to run accessibility test against sandboxed test\ninstance.</p>\n<h3>./bootstrap.py</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ curl</span><span> </span><span class=\"cm-attribute\">-O</span><span> http://downloads.buildout.org/2/bootstrap.py</span></code></pre>\n    </div>\n<h3>./buildout.cfg</h3>\n<div class=\"gatsby-highlight\" data-language=\"properties\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-header\">[buildout]</span><span>\n</span><span class=\"cm-def\">extends </span><span>=</span><span class=\"cm-quote\"> http</span><span>:</span><span class=\"cm-quote\">//dist.plone.org/release/4.3-latest/versions.cfg</span><span>\n</span><span class=\"cm-def\">parts </span><span>=</span><span class=\"cm-quote\"> robot</span><span>\n\n</span><span class=\"cm-header\">[robot]</span><span>\n</span><span class=\"cm-def\">recipe </span><span>=</span><span class=\"cm-quote\"> zc.recipe.egg</span><span>\n</span><span class=\"cm-def\">eggs </span><span>=</span><span>\n</span><span class=\"cm-def\">     plone.app.robotframework</span><span>\n</span><span class=\"cm-def\">     robotframework-wavelibrary</span></code></pre>\n    </div>\n<h3>./plone.robot</h3>\n<div class=\"gatsby-highlight\" data-language=\"robotframework\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-header\">*** Settings ***</span><span>\n\n</span><span class=\"cm-meta\">Library</span><span>  </span><span class=\"cm-string\">WAVELibrary</span><span>\n\n</span><span class=\"cm-meta\">Resource</span><span>  </span><span class=\"cm-string\">plone/app/robotframework/server.robot</span><span>\n\n</span><span class=\"cm-meta\">Suite Setup</span><span>  </span><span class=\"cm-keyword\">Setup</span><span>\n</span><span class=\"cm-meta\">Suite Teardown</span><span>  </span><span class=\"cm-keyword\">Teardown</span><span>\n\n</span><span class=\"cm-header\">*** Variables ***</span><span>\n\n</span><span class=\"cm-variable-2\">${START_URL}</span><span>  </span><span class=\"cm-operator\">about:</span><span>\n\n</span><span class=\"cm-header\">*** Keywords ***</span><span>\n\n</span><span class=\"cm-def\">Setup</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Setup</span><span> </span><span class=\"cm-keyword\">Plone</span><span> </span><span class=\"cm-keyword\">site</span><span>  </span><span class=\"cm-string\">plone.app.robotframework.testing.AUTOLOGIN_ROBOT_TESTING</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Import</span><span> </span><span class=\"cm-keyword\">library</span><span>  </span><span class=\"cm-string\">Remote</span><span>  </span><span class=\"cm-variable-2\">${PLONE_URL}</span><span class=\"cm-string\">/RobotRemote</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Enable</span><span> </span><span class=\"cm-keyword\">autologin</span><span> </span><span class=\"cm-keyword\">as</span><span>  </span><span class=\"cm-string\">Site</span><span> </span><span class=\"cm-string\">Administrator</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Set</span><span> </span><span class=\"cm-keyword\">autologin</span><span> </span><span class=\"cm-keyword\">username</span><span>  </span><span class=\"cm-string\">test-user-1</span><span>\n\n</span><span class=\"cm-def\">Teardown</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Teardown</span><span> </span><span class=\"cm-keyword\">Plone</span><span> </span><span class=\"cm-keyword\">Site</span><span>\n\n</span><span class=\"cm-header\">*** Test Cases ***</span><span>\n\n</span><span class=\"cm-string header\">Test Plone forms</span><span>\n</span><span class=\"cm-bracket\">    </span><span class=\"cm-meta\">[Template]</span><span class=\"cm-bracket\">  </span><span class=\"cm-keyword\">Check</span><span> </span><span class=\"cm-keyword\">URL</span><span> </span><span class=\"cm-keyword\">for</span><span> </span><span class=\"cm-keyword\">accessibility</span><span> </span><span class=\"cm-keyword\">errors</span><span>\n</span><span>    </span><span class=\"cm-variable-2\">${PLONE_URL}</span><span class=\"cm-keyword\">/@@search</span><span>\n</span><span>    </span><span class=\"cm-variable-2\">${PLONE_URL}</span><span class=\"cm-keyword\">/folder_contents</span><span>\n</span><span>    </span><span class=\"cm-variable-2\">${PLONE_URL}</span><span class=\"cm-keyword\">/@@personal-information</span><span>\n</span><span>    </span><span class=\"cm-variable-2\">${PLONE_URL}</span><span class=\"cm-keyword\">/@@personal-preferences</span><span>\n\n</span><span class=\"cm-string header\">Test new page form tabs</span><span>\n</span><span class=\"cm-bracket\">    </span><span class=\"cm-meta\">[Template]</span><span class=\"cm-bracket\">  </span><span class=\"cm-keyword\">Check</span><span> </span><span class=\"cm-keyword\">new</span><span> </span><span class=\"cm-keyword\">page</span><span> </span><span class=\"cm-keyword\">tabs</span><span> </span><span class=\"cm-keyword\">for</span><span> </span><span class=\"cm-keyword\">accessibility</span><span> </span><span class=\"cm-keyword\">errors</span><span>\n</span><span>    </span><span class=\"cm-keyword\">default</span><span>\n</span><span>    </span><span class=\"cm-keyword\">categorization</span><span>\n</span><span>    </span><span class=\"cm-keyword\">dates</span><span>\n</span><span>    </span><span class=\"cm-keyword\">creators</span><span>\n</span><span>    </span><span class=\"cm-keyword\">settings</span><span>\n\n</span><span class=\"cm-header\">*** Keywords ***</span><span>\n\n</span><span class=\"cm-def\">Check</span><span> </span><span class=\"cm-def\">new</span><span> </span><span class=\"cm-def\">page</span><span> </span><span class=\"cm-def\">tabs</span><span> </span><span class=\"cm-def\">for</span><span> </span><span class=\"cm-def\">accessibility</span><span> </span><span class=\"cm-def\">errors</span><span>\n</span><span>    </span><span class=\"cm-meta\">[Arguments]</span><span>  </span><span class=\"cm-variable-2\">${fieldset</span><span class=\"cm-variable-2\">}</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Go</span><span> </span><span class=\"cm-keyword\">to</span><span>  </span><span class=\"cm-variable-2\">${PLONE_URL}</span><span class=\"cm-attribute\">/createObject?type_name</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">Document</span><span>\n</span><span>    </span><span class=\"cm-variable-2\">${location}</span><span> </span><span class=\"cm-operator\">=</span><span>  </span><span class=\"cm-keyword\">Get</span><span> </span><span class=\"cm-keyword\">location</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Go</span><span> </span><span class=\"cm-keyword\">to</span><span>  </span><span class=\"cm-variable-2\">${PLONE_URL</span><span class=\"cm-variable-2\">}</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Go</span><span> </span><span class=\"cm-keyword\">to</span><span>  </span><span class=\"cm-variable-2\">${location}</span><span class=\"cm-comment\">#fieldsetlegend-${fieldset}</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Check</span><span> </span><span class=\"cm-keyword\">accessibility</span><span> </span><span class=\"cm-keyword\">errors</span></code></pre>\n    </div>\n<h3>Installing</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ python</span><span> bootstrap.py</span><span>\n</span><span class=\"cm-def\">$ bin</span><span>/buildout</span></code></pre>\n    </div>\n<h3>Running</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ bin</span><span>/pybot plone.robot</span></code></pre>\n    </div>\n<h2>One more thing…</h2>\n<p>What about recording those test runs?</p>\n<ol>\n<li>\n<p>Get <a href=\"http://www.virtualbox.org\">VirtualBox</a> and\n<a href=\"http://www.vagrantup.com\">Vagrant</a>.</p>\n</li>\n<li>\n<p>Get and build my <a href=\"http://github.com/datakurre/robotrecorder_vagrant/\">Robot Recorder\nkit</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ git</span><span> clone </span><span class=\"cm-builtin\">git</span><span>://github.com/datakurre/robotrecorder_vagrant.git</span><span>\n</span><span class=\"cm-def\">$ cd</span><span> robotrecorder_vagrant &amp;&amp; vagrant up &amp;&amp; </span><span class=\"cm-builtin\">cd</span><span> ..</span></code></pre>\n    </div>\n</li>\n<li>\n<p>Figure out your computer’s local IP…</p>\n</li>\n<li>\n<p>Record the previously described Plone-suite:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ ZSERVER_HOST</span><span class=\"cm-operator\">=</span><span>mycomputerip bin/pybot </span><span class=\"cm-attribute\">-v</span><span> ZOPE_HOST:mycomputerip </span><span class=\"cm-attribute\">-v</span><span> REMOTE_URL:http://localhost:4444/wd/hub plone.robot</span></code></pre>\n    </div>\n</li>\n</ol>\n<p>The recording is saved in <code>./robotrecorder_vagrant/recordings</code>.</p>","frontmatter":{"title":"Stay accessible – Robot Framework library for WAVE-toolbar","tags":["Accessibility","Plone","Robot Framework","Vagrant","Wave","WebAIM"],"date":"May 26, 2013","published":"2013-05-26 06:00:00"}}},"pageContext":{"slug":"/2013/05/stay-accessible-robot-framework-library.html/","previous":{"fields":{"slug":"/2013/05/test-fixture-driven-development-for.html/"},"frontmatter":{"title":"Test fixture driven development for Plone add-ons?"}},"next":{"fields":{"slug":"/2013/08/write-testable-documentation-with-robot.html/"},"frontmatter":{"title":"Write testable documentation with Robot Framework"}}}},"staticQueryHashes":["63159454"],"slicesMap":{}}