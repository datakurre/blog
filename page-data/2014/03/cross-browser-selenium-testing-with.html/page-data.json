{"componentChunkName":"component---src-templates-blog-post-js","path":"/2014/03/cross-browser-selenium-testing-with.html/","result":{"data":{"site":{"siteMetadata":{"title":"Asko Soukka","author":"Asko Soukka"}},"markdownRemark":{"id":"a847e773-7f6c-5ccb-9423-73ebef049305","fields":{"slug":"/2014/03/cross-browser-selenium-testing-with.html/"},"excerpt":"How do you keep your Selenium tests\nup-to-date with your ever-changing user interface? Do you try to fix\nyour existing tests, or do you just re-record them over…","html":"<p>How do you keep your <a href=\"http://docs.seleniumhq.org/\">Selenium</a> tests\nup-to-date with your ever-changing user interface? Do you try to fix\nyour existing tests, or do you just re-record them over and over again?</p>\n<p>In the <a href=\"http://plone.org/\">Plone</a> Community, we have chosen the former\napproach (Plone is a popular open source CMS written in Python). We use\na tool called <a href=\"http://robotframework.org/\">Robot Framework</a> to write our\nSelenium acceptance tests as maintainable BDD-style stories. Robot\nFramework’s extensible test language allows us to describe Plone’s\nfeatures in a natural language sentences, which can then be expanded\ninto either our domain specific or Selenium WebDriver API based testing\nlanguage.</p>\n<p>As an example, have a look at the following real-life acceptance test\ncase on the next generation multilingual support in Plone:</p>\n<div class=\"gatsby-highlight\" data-language=\"robotframework\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-header\">*** Test Cases ***</span><span>\n\n</span><span class=\"cm-string header\">Scenario: As an editor I can add new translation</span><span>\n</span><span class=\"cm-bracket\">    </span><span class=\"cm-builtin em\">Given</span><span> </span><span class=\"cm-keyword\">a</span><span> </span><span class=\"cm-keyword\">site</span><span> </span><span class=\"cm-keyword\">owner</span><span>\n</span><span class=\"cm-bracket\">      </span><span class=\"cm-builtin em\">and</span><span> </span><span class=\"cm-keyword\">a</span><span> </span><span class=\"cm-keyword\">document</span><span> </span><span class=\"cm-keyword\">in</span><span> </span><span class=\"cm-keyword\">English</span><span>\n</span><span class=\"cm-bracket\">      </span><span class=\"cm-builtin em\">and</span><span> </span><span class=\"cm-keyword\">a</span><span> </span><span class=\"cm-keyword\">document</span><span> </span><span class=\"cm-keyword\">in</span><span> </span><span class=\"cm-keyword\">Catalan</span><span>\n</span><span class=\"cm-bracket\">     </span><span class=\"cm-builtin em\">When</span><span> </span><span class=\"cm-keyword\">I</span><span> </span><span class=\"cm-keyword\">view</span><span> </span><span class=\"cm-keyword\">the</span><span> </span><span class=\"cm-keyword\">Catalan</span><span> </span><span class=\"cm-keyword\">document</span><span>\n</span><span class=\"cm-bracket\">      </span><span class=\"cm-builtin em\">and</span><span> </span><span class=\"cm-keyword\">I</span><span> </span><span class=\"cm-keyword\">add</span><span> </span><span class=\"cm-keyword\">the</span><span> </span><span class=\"cm-keyword\">document</span><span> </span><span class=\"cm-keyword\">in</span><span> </span><span class=\"cm-keyword\">English</span><span> </span><span class=\"cm-keyword\">as</span><span> </span><span class=\"cm-keyword\">a</span><span> </span><span class=\"cm-keyword\">translation</span><span>\n</span><span class=\"cm-bracket\">      </span><span class=\"cm-builtin em\">and</span><span> </span><span class=\"cm-keyword\">I</span><span> </span><span class=\"cm-keyword\">switch</span><span> </span><span class=\"cm-keyword\">to</span><span> </span><span class=\"cm-keyword\">English</span><span>\n</span><span class=\"cm-bracket\">     </span><span class=\"cm-builtin em\">Then</span><span> </span><span class=\"cm-keyword\">I</span><span> </span><span class=\"cm-keyword\">can</span><span> </span><span class=\"cm-keyword\">view</span><span> </span><span class=\"cm-keyword\">the</span><span> </span><span class=\"cm-keyword\">document</span><span> </span><span class=\"cm-keyword\">in</span><span> </span><span class=\"cm-keyword\">English</span><span>\n\n</span><span class=\"cm-header\">*** Keywords ***</span><span>\n\n</span><span class=\"cm-def\">a</span><span> </span><span class=\"cm-def\">site</span><span> </span><span class=\"cm-def\">owner</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Enable</span><span> </span><span class=\"cm-keyword\">autologin</span><span> </span><span class=\"cm-keyword\">as</span><span>  </span><span class=\"cm-string\">Manager</span><span>\n\n</span><span class=\"cm-def\">a</span><span> </span><span class=\"cm-def\">document</span><span> </span><span class=\"cm-def\">in</span><span> </span><span class=\"cm-def\">English</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Create</span><span> </span><span class=\"cm-keyword\">content</span><span>  </span><span class=\"cm-attribute\">type</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">Document</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">container</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">/</span><span class=\"cm-variable-2\">${PLONE_SITE_ID}</span><span class=\"cm-string\">/en/</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">an-english-document</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">title</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">An</span><span> </span><span class=\"cm-string\">English</span><span> </span><span class=\"cm-string\">Document</span><span>\n\n</span><span class=\"cm-def\">a</span><span> </span><span class=\"cm-def\">document</span><span> </span><span class=\"cm-def\">in</span><span> </span><span class=\"cm-def\">Catalan</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Create</span><span> </span><span class=\"cm-keyword\">content</span><span>  </span><span class=\"cm-attribute\">type</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">Document</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">container</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">/</span><span class=\"cm-variable-2\">${PLONE_SITE_ID}</span><span class=\"cm-string\">/ca/</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">a-catalan-document</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">title</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">A</span><span> </span><span class=\"cm-string\">Catalan</span><span> </span><span class=\"cm-string\">Document</span><span>\n\n</span><span class=\"cm-def\">I</span><span> </span><span class=\"cm-def\">view</span><span> </span><span class=\"cm-def\">the</span><span> </span><span class=\"cm-def\">Catalan</span><span> </span><span class=\"cm-def\">document</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Go</span><span> </span><span class=\"cm-keyword\">to</span><span>  </span><span class=\"cm-variable-2\">${PLONE_URL}</span><span class=\"cm-string\">/ca/a-catalan-document</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Wait</span><span> </span><span class=\"cm-keyword\">until</span><span> </span><span class=\"cm-keyword\">page</span><span> </span><span class=\"cm-keyword\">contains</span><span>  </span><span class=\"cm-string\">A</span><span> </span><span class=\"cm-string\">Catalan</span><span> </span><span class=\"cm-string\">Document</span><span>\n\n</span><span class=\"cm-def\">I</span><span> </span><span class=\"cm-def\">add</span><span> </span><span class=\"cm-def\">the</span><span> </span><span class=\"cm-def\">document</span><span> </span><span class=\"cm-def\">in</span><span> </span><span class=\"cm-def\">English</span><span> </span><span class=\"cm-def\">as</span><span> </span><span class=\"cm-def\">a</span><span> </span><span class=\"cm-def\">translation</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">Element</span><span>  </span><span class=\"cm-attribute\">css</span><span class=\"cm-operator\">=</span><span class=\"cm-comment\">#plone-contentmenu-multilingual .actionMenuHeader a</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Wait</span><span> </span><span class=\"cm-keyword\">until</span><span> </span><span class=\"cm-keyword\">element</span><span> </span><span class=\"cm-keyword\">is</span><span> </span><span class=\"cm-keyword\">visible</span><span>  </span><span class=\"cm-attribute\">css</span><span class=\"cm-operator\">=</span><span class=\"cm-comment\">#_add_translations</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">Element</span><span>  </span><span class=\"cm-attribute\">css</span><span class=\"cm-operator\">=</span><span class=\"cm-comment\">#_add_translations</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Wait</span><span> </span><span class=\"cm-keyword\">until</span><span> </span><span class=\"cm-keyword\">page</span><span> </span><span class=\"cm-keyword\">contains</span><span> </span><span class=\"cm-keyword\">element</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">css</span><span class=\"cm-operator\">=</span><span class=\"cm-comment\">#formfield-form-widgets-content-widgets-query .searchButton</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">Element</span><span>  </span><span class=\"cm-attribute\">css</span><span class=\"cm-operator\">=</span><span class=\"cm-comment\">#formfield-form-widgets-content-widgets-query .searchButton</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Wait</span><span> </span><span class=\"cm-keyword\">until</span><span> </span><span class=\"cm-keyword\">element</span><span> </span><span class=\"cm-keyword\">is</span><span> </span><span class=\"cm-keyword\">visible</span><span>  </span><span class=\"cm-attribute\">css</span><span class=\"cm-operator\">=</span><span class=\"cm-comment\">#form-widgets-content-contenttree a[href$='/plone/en']</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">Element</span><span>  </span><span class=\"cm-attribute\">css</span><span class=\"cm-operator\">=</span><span class=\"cm-comment\">#form-widgets-content-contenttree a[href$='/plone/en']</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Wait</span><span> </span><span class=\"cm-keyword\">until</span><span> </span><span class=\"cm-keyword\">page</span><span> </span><span class=\"cm-keyword\">contains</span><span>  </span><span class=\"cm-string\">An</span><span> </span><span class=\"cm-string\">English</span><span> </span><span class=\"cm-string\">Document</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">link</span><span>  </span><span class=\"cm-attribute\">xpath</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">//*[contains(text(),</span><span> </span><span class=\"cm-string\">'An</span><span> </span><span class=\"cm-string\">English</span><span> </span><span class=\"cm-operator\">Document')]/parent::</span><span class=\"cm-string\">a</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">Element</span><span>  </span><span class=\"cm-attribute\">css</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">.contentTreeAdd</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Select</span><span> </span><span class=\"cm-keyword\">From</span><span> </span><span class=\"cm-keyword\">List</span><span>  </span><span class=\"cm-attribute\">name</span><span class=\"cm-operator\">=form.widgets.language:</span><span class=\"cm-string\">list</span><span>  </span><span class=\"cm-string\">en</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">Element</span><span>  </span><span class=\"cm-attribute\">css</span><span class=\"cm-operator\">=</span><span class=\"cm-comment\">#form-buttons-add_translations</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">Element</span><span>  </span><span class=\"cm-attribute\">css</span><span class=\"cm-operator\">=</span><span class=\"cm-comment\">#contentview-view a</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Wait</span><span> </span><span class=\"cm-keyword\">until</span><span> </span><span class=\"cm-keyword\">page</span><span> </span><span class=\"cm-keyword\">contains</span><span>  </span><span class=\"cm-string\">A</span><span> </span><span class=\"cm-string\">Catalan</span><span> </span><span class=\"cm-string\">Document</span><span>\n\n</span><span class=\"cm-def\">I</span><span> </span><span class=\"cm-def\">switch</span><span> </span><span class=\"cm-def\">to</span><span> </span><span class=\"cm-def\">English</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">Link</span><span>  </span><span class=\"cm-string\">English</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Wait</span><span> </span><span class=\"cm-keyword\">until</span><span> </span><span class=\"cm-keyword\">page</span><span> </span><span class=\"cm-keyword\">contains</span><span>  </span><span class=\"cm-string\">An</span><span> </span><span class=\"cm-string\">English</span><span> </span><span class=\"cm-string\">Document</span><span>\n\n</span><span class=\"cm-def\">I</span><span> </span><span class=\"cm-def\">can</span><span> </span><span class=\"cm-def\">view</span><span> </span><span class=\"cm-def\">the</span><span> </span><span class=\"cm-def\">document</span><span> </span><span class=\"cm-def\">in</span><span> </span><span class=\"cm-def\">English</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Page</span><span> </span><span class=\"cm-keyword\">Should</span><span> </span><span class=\"cm-keyword\">Contain</span><span> </span><span class=\"cm-keyword\">Element</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">xpath</span><span class=\"cm-operator\">=</span><span class=\"cm-attribute\">//*[contains(</span><span class=\"cm-string\">@</span><span class=\"cm-attribute\">class, 'documentFirstHeading')][./text()</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">'An</span><span> </span><span class=\"cm-string\">English</span><span> </span><span class=\"cm-string\">Document']</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Page</span><span> </span><span class=\"cm-keyword\">Should</span><span> </span><span class=\"cm-keyword\">Contain</span><span> </span><span class=\"cm-keyword\">Element</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">xpath</span><span class=\"cm-operator\">=</span><span class=\"cm-attribute\">//ul[</span><span class=\"cm-string\">@</span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-attribute\">'portal-languageselector']/li[contains(</span><span class=\"cm-string\">@</span><span class=\"cm-attribute\">class, 'currentLanguage')]/a[</span><span class=\"cm-string\">@</span><span class=\"cm-attribute\">title</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">'English']</span></code></pre>\n    </div>\n<h2>About Robot Framework</h2>\n<p><a href=\"http://robotframework.org/\">Robot Framework</a> is a generic\nkeyword-driven test automation framework for acceptance testing and\nacceptance test-driven development. It’s a neat tool by itself, yet its\ntesting capabilities can be extended implementing custom test libraries\neither with Python or Java — without any other limits.</p>\n<p>The super powers of Robot Framework come from its user keyword feature:\nin addition to the keywords provided by the extension libraries, users\ncan create new higher-level keywords from the existing ones using the\nsame syntax that is used for creating test cases. And, of course,\neverything can be parametrized with variables.</p>\n<p>How could you cross-browser test your web applications with Robot\nFramework and its popular <a href=\"https://pypi.python.org/pypi/robotframework-selenium2library\">Selenium WebDriver keyword\nlibrary</a>?</p>\n<h2>Installing Robot Framework</h2>\n<p>To get started, we need <a href=\"http://www.mozilla.org/firefox/\">Firefox</a>,\n<a href=\"https://www.python.org/download/releases/2.7.6/\">Python 2.7</a> (or\n<a href=\"https://www.python.org/download/releases/2.6.8/\">Python 2.6</a>) with\n<a href=\"https://pypi.python.org/pypi/pip\">pip</a> package manager and\n<a href=\"https://pypi.python.org/pypi/virtualenv\">virtualenv</a> isolation packages\ninstalled. For Linux-distributions, all of these should be available\ndirectly from the system repositories (e.g. using\n<code>apt-get install python-virtualenv</code> in Ubuntu), but on OS X and Windows,\nsome extra steps would be needed.</p>\n<p>Once all these prerequisites all available, you can install Robot\nFramework and all the requirements for Selenium-testing with:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ virtualenv</span><span> robot </span><span class=\"cm-attribute\">--no-site-packages</span><span>\n</span><span class=\"cm-def\">$ robot</span><span>/bin/pip install robotframework-selenium2library</span></code></pre>\n    </div>\n<p>The installation process should look something like:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ virtualenv</span><span> robot </span><span class=\"cm-attribute\">--no-site-packages</span><span>\n</span><span>New python executable </span><span class=\"cm-keyword\">in</span><span> robot/bin/python</span><span>\n</span><span>Installing Setuptools...done.</span><span>\n</span><span>Installing Pip...done.</span><span>\n\n</span><span class=\"cm-def\">$ robot</span><span>/bin/pip install robotframework-selenium2library</span><span>\n</span><span>Downloading/unpacking robotframework-selenium2library</span><span>\n</span><span>  Downloading robotframework-selenium2library-1.5.0.tar.gz (216kB): 216kB downloaded</span><span>\n</span><span>  Running setup.py egg_info </span><span class=\"cm-keyword\">for</span><span> package robotframework-selenium2library</span><span>\n</span><span>  ...</span><span>\n</span><span>Downloading/unpacking decorator&gt;</span><span class=\"cm-operator\">=</span><span class=\"cm-number\">3</span><span>.3.2 (from robotframework-selenium2library)</span><span>\n</span><span>  Downloading decorator-3.4.0.tar.gz</span><span>\n</span><span>  Running setup.py egg_info </span><span class=\"cm-keyword\">for</span><span> package decorator</span><span>\n</span><span>  ...</span><span>\n</span><span>Downloading/unpacking selenium&gt;</span><span class=\"cm-operator\">=</span><span class=\"cm-number\">2</span><span>.32.0 (from robotframework-selenium2library)</span><span>\n</span><span>  Downloading selenium-2.40.0.tar.gz (2.5MB): </span><span class=\"cm-number\">2</span><span>.5MB downloaded</span><span>\n</span><span>  Running setup.py egg_info </span><span class=\"cm-keyword\">for</span><span> package selenium</span><span>\n</span><span>  ...</span><span>\n</span><span>Downloading/unpacking robotframework&gt;</span><span class=\"cm-operator\">=</span><span class=\"cm-number\">2</span><span>.6.0 (from robotframework-selenium2library)</span><span>\n</span><span>  Downloading robotframework-2.8.4.tar.gz (579kB): 579kB downloaded</span><span>\n</span><span>  Running setup.py egg_info </span><span class=\"cm-keyword\">for</span><span> package robotframework</span><span>\n</span><span>  ...</span><span>\n</span><span>Downloading/unpacking docutils&gt;</span><span class=\"cm-operator\">=</span><span class=\"cm-number\">0</span><span>.8.1 (from robotframework-selenium2library)</span><span>\n</span><span>  Downloading docutils-0.11.tar.gz (1.6MB): </span><span class=\"cm-number\">1</span><span>.6MB downloaded</span><span>\n</span><span>  Running setup.py egg_info </span><span class=\"cm-keyword\">for</span><span> package docutils</span><span>\n</span><span>  ...</span><span>\n</span><span>Installing collected packages: robotframework-selenium2library, decorator, selenium, robotframework, docutils</span><span>\n</span><span>  Running setup.py install </span><span class=\"cm-keyword\">for</span><span> robotframework-selenium2library</span><span>\n</span><span>  ...</span><span>\n</span><span>  Running setup.py install </span><span class=\"cm-keyword\">for</span><span> decorator</span><span>\n</span><span>  ...</span><span>\n</span><span>  Running setup.py install </span><span class=\"cm-keyword\">for</span><span> selenium</span><span>\n</span><span>  ...</span><span>\n</span><span>  Running setup.py install </span><span class=\"cm-keyword\">for</span><span> robotframework</span><span>\n</span><span>  ...</span><span>\n</span><span>  Running setup.py install </span><span class=\"cm-keyword\">for</span><span> docutils</span><span>\n</span><span>  ...</span><span>\n</span><span> Successfully installed robotframework-selenium2library decorator selenium robotframework</span><span>\n</span><span> docutils</span><span>\n</span><span> Cleaning up...</span></code></pre>\n    </div>\n<p>And we should end up having the Robot Framework executable installed at:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ robot</span><span>/bin/pybot</span></code></pre>\n    </div>\n<h2>Writing a Selenium test suite in robot</h2>\n<p>In the following examples, we use Robot Framework’s space separated\n<a href=\"http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html#plain-text-format\">plain text test\nformat</a>.\nIn this format a simple test suite can be written in a single plain text\nfile named with a <code>.robot</code> suffix. To maximize readability, only two or\nmore spaces are required to separate the different test syntax parts in\nthe same line.</p>\n<p>In the first example, we:</p>\n<ul>\n<li>import Selenium2Library to enable <a href=\"http://rtomac.github.io/robotframework-selenium2library/doc/Selenium2Library.html\">Selenium\nkeywords</a>\n(because only the <a href=\"http://robotframework.googlecode.com/hg/doc/libraries/BuiltIn.html\">built-in\nkeywords</a>\nare available by default)</li>\n<li>define simple test setup and teardown keywords</li>\n<li>implement a simple test case using the imported <a href=\"http://rtomac.github.io/robotframework-selenium2library/doc/Selenium2Library.html\">Selenium\nkeywords</a></li>\n<li>use a tag to categorize the test case</li>\n<li>abstract the test with a variable to make it easier to update the\ntest later.</li>\n</ul>\n<p>Now, write the following complete Selenium test suite into a file named\n<code>test_saucelabs_login.robot</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"robotframework\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-header\">*** Settings ***</span><span>\n\n</span><span class=\"cm-meta\">Library</span><span>  </span><span class=\"cm-string\">Selenium2Library</span><span>\n\n</span><span class=\"cm-meta\">Test Setup</span><span>  </span><span class=\"cm-keyword\">Open</span><span> </span><span class=\"cm-keyword\">test</span><span> </span><span class=\"cm-keyword\">browser</span><span>\n</span><span class=\"cm-meta\">Test Teardown</span><span>  </span><span class=\"cm-keyword\">Close</span><span> </span><span class=\"cm-keyword\">test</span><span> </span><span class=\"cm-keyword\">browser</span><span>\n\n</span><span class=\"cm-header\">*** Variables ***</span><span>\n\n</span><span class=\"cm-variable-2\">${LOGIN_FAIL_MSG}</span><span>  </span><span class=\"cm-string\">Incorrect</span><span> </span><span class=\"cm-string\">username</span><span> </span><span class=\"cm-string\">or</span><span> </span><span class=\"cm-string\">password.</span><span>\n\n</span><span class=\"cm-header\">*** Test Cases ***</span><span>\n\n</span><span class=\"cm-string header\">Incorrect username or password</span><span>\n</span><span class=\"cm-bracket\">    </span><span class=\"cm-meta\">[Tags]</span><span class=\"cm-bracket\">  </span><span class=\"cm-tag\">Login</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Go</span><span> </span><span class=\"cm-keyword\">to</span><span>  </span><span class=\"cm-string\">https://saucelabs.com/login</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Page</span><span> </span><span class=\"cm-keyword\">should</span><span> </span><span class=\"cm-keyword\">contain</span><span> </span><span class=\"cm-keyword\">element</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">username</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Page</span><span> </span><span class=\"cm-keyword\">should</span><span> </span><span class=\"cm-keyword\">contain</span><span> </span><span class=\"cm-keyword\">element</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">password</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Input</span><span> </span><span class=\"cm-keyword\">text</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">username</span><span>  </span><span class=\"cm-string\">anonymous</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Input</span><span> </span><span class=\"cm-keyword\">text</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">password</span><span>  </span><span class=\"cm-string\">secret</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">button</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">submit</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Page</span><span> </span><span class=\"cm-keyword\">should</span><span> </span><span class=\"cm-keyword\">contain</span><span>  </span><span class=\"cm-variable-2\">${LOGIN_FAIL_MSG</span><span class=\"cm-variable-2\">}</span><span>\n\n</span><span class=\"cm-header\">*** Keywords ***</span><span>\n\n</span><span class=\"cm-def\">Open</span><span> </span><span class=\"cm-def\">test</span><span> </span><span class=\"cm-def\">browser</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Open</span><span> </span><span class=\"cm-keyword\">browser</span><span>  </span><span class=\"cm-operator\">about:</span><span>\n\n</span><span class=\"cm-def\">Close</span><span> </span><span class=\"cm-def\">test</span><span> </span><span class=\"cm-def\">browser</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Close</span><span> </span><span class=\"cm-keyword\">all</span><span> </span><span class=\"cm-keyword\">browsers</span></code></pre>\n    </div>\n<p>A standalone test suite may contain one to four sections from\n<code>*** Settings ***</code>, <code>*** Variables ***</code>, <code>*** Test Cases ***</code> and\n<code>*** Keywords ***</code>, but always the <code>*** Test Cases ***</code> section. To\nsummarize the sections:</p>\n<p>Settings</p>\n<p>:   Imports all the used keyword libraries and user keyword resource\nfiles. Contains all test suite level configuration such as\nsuite/test setup and teardown instructions.</p>\n<p>Variables</p>\n<p>:   Defines all suite level variables with their default values.</p>\n<p>Test Cases</p>\n<p>:   Contains all the test cases for the test suite.</p>\n<p>Keywords</p>\n<p>:   Contains all the suite level user keyword implementations.</p>\n<p>For the complete list of all available features for each of these\nsections, you can refer to <a href=\"http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html#all-available-settings-in-test-data\">Robot Framework User\nGuide</a>.</p>\n<h2>Running a robot test suite</h2>\n<p>The default Robot Framework test runner is called <code>pybot</code>. Next, we can\nexecute our test suite and create a test report from the execution by\ntyping:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ robot</span><span>/bin/pybot test_saucelabs_login.robot</span></code></pre>\n    </div>\n<p>Besides opening a web browser, our example test suite run should look\nlike:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ robot</span><span>/bin/pybot test_saucelabs_login.robot</span><span>\n</span><span class=\"cm-operator\">==============================================================================</span><span>\n</span><span>Test Saucelabs Login</span><span>\n</span><span class=\"cm-operator\">==============================================================================</span><span>\n</span><span>Incorrect username or password                                        | PASS |</span><span>\n</span><span class=\"cm-attribute\">------------------------------------------------------------------------------</span><span>\n</span><span>Test Saucelabs Login                                                  | PASS |</span><span>\n</span><span class=\"cm-number\">1</span><span> critical test, </span><span class=\"cm-number\">1</span><span> passed, </span><span class=\"cm-number\">0</span><span> failed</span><span>\n</span><span class=\"cm-number\">1</span><span> test total, </span><span class=\"cm-number\">1</span><span> passed, </span><span class=\"cm-number\">0</span><span> failed</span><span>\n</span><span class=\"cm-operator\">==============================================================================</span><span>\n</span><span>Output:  /.../output.xml</span><span>\n</span><span>Log:     /.../log.html</span><span>\n</span><span>Report:  /.../report.html</span></code></pre>\n    </div>\n<p>And the test run should result a HTML test report file named\n<code>report.html</code> and a complete step by step test log file named\n<code>log.html</code>. The latter should look like:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9e6ee8f5b54428b1c64772ab864fe17e/fcda8/saucelabs-robot-log.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.48648648648648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsSAAALEgHS3X78AAACq0lEQVQ4y31TSW+bQBTm7/dQVeqhOTiXXNpTpV4i9VA1VS3HMZhtjNmXAQxmnQHvxibuw06qyJX68WaRZr75Hm9hXNeVZVlRFJ4XVFUTBGGqTBGaGIbZNM3pdHrucGrbbj4e236/f3t7e/PpptfrMWmS2Lat69pqtYSrRzjvAOuhu/5fMI4TSLLuutE8oabpIaQFATxYzec0jolpYsPwdN217cC0MDuSxsrkO3q4F3+EecxMp/pwOJ7Piywjvj/DOIiiNE1LsCQpMA49Lzhb6Lh49Dj+Kf3+IH58x75Hc6VT9v0kSQjGCcvKo5E0Vd0gLPwgB4N/l2VdlDRl6kwU89fD40AQvrL3XwbfcBYxqpo8DiKOS3U9MQxb0yzHDeK4iOM8inLL8gzTNQzXsjBshgOuLz3dCZ97ozszdZgwjAzLUVXT0E1KSRde+E4Q3C5yELPz3J7XFqZDe9i2GzDYMCUtJzaKizm47tguRCjP6+Vy3x4vSXrB8RXwRLNvtpvt4XBgKKU8x6dJuljUdb0SBFcUsIh8J5gv6ooQQgmpKAXWVZ468mq18mO/qIuKViCOkKggCRlitJjt981ut9vvdlAt7RtACQBAn4EDzdIMbIJIWZa6ZliWPQsjUtAsy/O8gLxtt1tgPL/RBCaAgZ2u6b7nZ2m23qzdyAtnASF5vSB13flMShhks15fud2Rm13jZ76Vm5qhSxJysZNltKpOYJSeLtV9RQNHFotFR96fySpR+QnPjrjxeMyOxhwrC4LCcUhVjTAIL+3xhryB2L4oB5mvl5qkSGOOl0QJIVlXp5ZlYs+tq+rf9gDlFzIo48SblgqP+KchC8rQlUhGlmkVRbFcLsHDK/Jm86oMyUhJiin2ZtixHWjvqqLr1QXAXcJy+IumgToBMrwIKfwDILmfupYjGtIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/9e6ee8f5b54428b1c64772ab864fe17e/fcda8/saucelabs-robot-log.png\"\n        srcset=\"/static/9e6ee8f5b54428b1c64772ab864fe17e/12f09/saucelabs-robot-log.png 148w,\n/static/9e6ee8f5b54428b1c64772ab864fe17e/e4a3f/saucelabs-robot-log.png 295w,\n/static/9e6ee8f5b54428b1c64772ab864fe17e/fcda8/saucelabs-robot-log.png 590w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>To see all the available options for the test runner, just type:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ robot</span><span>/bin/pybot </span><span class=\"cm-attribute\">--help</span></code></pre>\n    </div>\n<h2>Writing a Sauce-Labs Selenium test suite in robot</h2>\n<p>Now that we have a working Robot Framework installation and a functional\ntest suite, we can continue to refactor the test suite to support\ncross-browser testing with Sauce Labs.</p>\n<p>Let’s update our <code>test_saucelabs_login.robot</code> to look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"robotframework\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-header\">*** Settings ***</span><span>\n\n</span><span class=\"cm-meta\">Library</span><span>  </span><span class=\"cm-string\">Selenium2Library</span><span>\n</span><span class=\"cm-meta\">Library</span><span>  </span><span class=\"cm-string\">SauceLabs</span><span>\n\n</span><span class=\"cm-meta\">Test Setup</span><span>  </span><span class=\"cm-keyword\">Open</span><span> </span><span class=\"cm-keyword\">test</span><span> </span><span class=\"cm-keyword\">browser</span><span>\n</span><span class=\"cm-meta\">Test Teardown</span><span>  </span><span class=\"cm-keyword\">Close</span><span> </span><span class=\"cm-keyword\">test</span><span> </span><span class=\"cm-keyword\">browser</span><span>\n\n</span><span class=\"cm-header\">*** Variables ***</span><span>\n\n</span><span class=\"cm-variable-2\">${BROWSER}</span><span>  </span><span class=\"cm-string\">firefox</span><span>\n</span><span class=\"cm-variable-2\">${REMOTE_URL</span><span class=\"cm-variable-2\">}</span><span>\n</span><span class=\"cm-variable-2\">${DESIRED_CAPABILITIES</span><span class=\"cm-variable-2\">}</span><span>\n\n</span><span class=\"cm-variable-2\">${LOGIN_FAIL_MSG}</span><span>  </span><span class=\"cm-string\">Incorrect</span><span> </span><span class=\"cm-string\">username</span><span> </span><span class=\"cm-string\">or</span><span> </span><span class=\"cm-string\">password.</span><span>\n\n</span><span class=\"cm-header\">*** Test Cases ***</span><span>\n\n</span><span class=\"cm-string header\">Incorrect username or password</span><span>\n</span><span class=\"cm-bracket\">    </span><span class=\"cm-meta\">[Tags]</span><span class=\"cm-bracket\">  </span><span class=\"cm-tag\">Login</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Go</span><span> </span><span class=\"cm-keyword\">to</span><span>  </span><span class=\"cm-string\">https://saucelabs.com/login</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Page</span><span> </span><span class=\"cm-keyword\">should</span><span> </span><span class=\"cm-keyword\">contain</span><span> </span><span class=\"cm-keyword\">element</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">username</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Page</span><span> </span><span class=\"cm-keyword\">should</span><span> </span><span class=\"cm-keyword\">contain</span><span> </span><span class=\"cm-keyword\">element</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">password</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Input</span><span> </span><span class=\"cm-keyword\">text</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">username</span><span>  </span><span class=\"cm-string\">anonymous</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Input</span><span> </span><span class=\"cm-keyword\">text</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">password</span><span>  </span><span class=\"cm-string\">secret</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Click</span><span> </span><span class=\"cm-keyword\">button</span><span>  </span><span class=\"cm-attribute\">id</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">submit</span><span>\n\n</span><span>    </span><span class=\"cm-keyword\">Page</span><span> </span><span class=\"cm-keyword\">should</span><span> </span><span class=\"cm-keyword\">contain</span><span>  </span><span class=\"cm-variable-2\">${LOGIN_FAIL_MSG</span><span class=\"cm-variable-2\">}</span><span>\n\n</span><span class=\"cm-header\">*** Keywords ***</span><span>\n\n</span><span class=\"cm-def\">Open</span><span> </span><span class=\"cm-def\">test</span><span> </span><span class=\"cm-def\">browser</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Open</span><span> </span><span class=\"cm-keyword\">browser</span><span>  </span><span class=\"cm-operator\">about:</span><span>  </span><span class=\"cm-variable-2\">${BROWSER</span><span class=\"cm-variable-2\">}</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">remote_url</span><span class=\"cm-operator\">=</span><span class=\"cm-variable-2\">${REMOTE_URL</span><span class=\"cm-variable-2\">}</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-attribute\">desired_capabilities</span><span class=\"cm-operator\">=</span><span class=\"cm-variable-2\">${DESIRED_CAPABILITIES</span><span class=\"cm-variable-2\">}</span><span>\n\n</span><span class=\"cm-def\">Close</span><span> </span><span class=\"cm-def\">test</span><span> </span><span class=\"cm-def\">browser</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Run</span><span> </span><span class=\"cm-keyword\">keyword</span><span> </span><span class=\"cm-keyword\">if</span><span>  </span><span class=\"cm-attribute\">'</span><span class=\"cm-variable-2\">${REMOTE_URL}</span><span class=\"cm-attribute\">' !</span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-string\">''</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-string\">Report</span><span> </span><span class=\"cm-string\">Sauce</span><span> </span><span class=\"cm-string\">status</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-variable-2\">${SUITE_NAME}</span><span> </span><span class=\"cm-bracket\">|</span><span> </span><span class=\"cm-variable-2\">${TEST_NAME</span><span class=\"cm-variable-2\">}</span><span>\n</span><span>    </span><span class=\"cm-bracket\">...</span><span>  </span><span class=\"cm-variable-2\">${TEST_STATUS}</span><span>  </span><span class=\"cm-variable-2\">${TEST_TAGS}</span><span>  </span><span class=\"cm-variable-2\">${REMOTE_URL</span><span class=\"cm-variable-2\">}</span><span>\n</span><span>    </span><span class=\"cm-keyword\">Close</span><span> </span><span class=\"cm-keyword\">all</span><span> </span><span class=\"cm-keyword\">browsers</span></code></pre>\n    </div>\n<p>All the things we changed:</p>\n<ul>\n<li>a new keyword library called <code>SauceLabs</code> is imported</li>\n<li>keyword <code>Open test browser</code> is abstracted to be configurable with\nvariables to support running the tests at Sauce Labs</li>\n<li>keyword <code>Close test browser</code> is enhanced to send test details and\ntest result to Sauce Labs by calling the new <code>Report Sauce status</code>\nkeyword.</li>\n</ul>\n<p>Next, we must implement our custom Sauce Labs keyword library with\nPython by creating the following <code>SauceLabs.py</code> file to provide the new\n<code>Report Sauce status</code> keyword:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-keyword\">import</span><span> </span><span class=\"cm-variable\">re</span><span>\n</span><span class=\"cm-keyword\">import</span><span> </span><span class=\"cm-variable\">requests</span><span>\n</span><span class=\"cm-keyword\">import</span><span> </span><span class=\"cm-variable\">simplejson</span><span> </span><span class=\"cm-keyword\">as</span><span> </span><span class=\"cm-variable\">json</span><span>\n\n</span><span class=\"cm-keyword\">from</span><span> </span><span class=\"cm-variable\">robot</span><span>.</span><span class=\"cm-property\">api</span><span> </span><span class=\"cm-keyword\">import</span><span> </span><span class=\"cm-variable\">logger</span><span>\n</span><span class=\"cm-keyword\">from</span><span> </span><span class=\"cm-variable\">robot</span><span>.</span><span class=\"cm-property\">libraries</span><span>.</span><span class=\"cm-property\">BuiltIn</span><span> </span><span class=\"cm-keyword\">import</span><span> </span><span class=\"cm-variable\">BuiltIn</span><span>\n\n</span><span class=\"cm-variable\">USERNAME_ACCESS_KEY</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">re</span><span>.</span><span class=\"cm-property\">compile</span><span>(</span><span class=\"cm-string\">'^(http|https):\\/\\/([^:]+):([^@]+)@'</span><span>)</span><span>\n\n\n</span><span class=\"cm-keyword\">def</span><span> </span><span class=\"cm-def\">report_sauce_status</span><span>(</span><span class=\"cm-variable\">name</span><span>, </span><span class=\"cm-variable\">status</span><span>, </span><span class=\"cm-variable\">tags</span><span class=\"cm-operator\">=</span><span>[], </span><span class=\"cm-variable\">remote_url</span><span class=\"cm-operator\">=</span><span class=\"cm-string\">''</span><span>):</span><span>\n</span><span>    </span><span class=\"cm-comment\"># Parse username and access_key from the remote_url</span><span>\n</span><span>    </span><span class=\"cm-keyword\">assert</span><span> </span><span class=\"cm-variable\">USERNAME_ACCESS_KEY</span><span>.</span><span class=\"cm-property\">match</span><span>(</span><span class=\"cm-variable\">remote_url</span><span>), </span><span class=\"cm-string\">'Incomplete remote_url.'</span><span>\n</span><span>    </span><span class=\"cm-variable\">username</span><span>, </span><span class=\"cm-variable\">access_key</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">USERNAME_ACCESS_KEY</span><span>.</span><span class=\"cm-property\">findall</span><span>(</span><span class=\"cm-variable\">remote_url</span><span>)[</span><span class=\"cm-number\">0</span><span>][</span><span class=\"cm-number\">1</span><span>:]</span><span>\n\n</span><span>    </span><span class=\"cm-comment\"># Get selenium session id from the keyword library</span><span>\n</span><span>    </span><span class=\"cm-variable\">selenium</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">BuiltIn</span><span>().</span><span class=\"cm-property\">get_library_instance</span><span>(</span><span class=\"cm-string\">'Selenium2Library'</span><span>)</span><span>\n</span><span>    </span><span class=\"cm-variable\">job_id</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">selenium</span><span>.</span><span class=\"cm-property\">_current_browser</span><span>().</span><span class=\"cm-property\">session_id</span><span>\n\n</span><span>    </span><span class=\"cm-comment\"># Prepare payload and headers</span><span>\n</span><span>    </span><span class=\"cm-variable\">token</span><span> </span><span class=\"cm-operator\">=</span><span> (</span><span class=\"cm-string\">':'</span><span>.</span><span class=\"cm-property\">join</span><span>([</span><span class=\"cm-variable\">username</span><span>, </span><span class=\"cm-variable\">access_key</span><span>])).</span><span class=\"cm-property\">encode</span><span>(</span><span class=\"cm-string\">'base64'</span><span>).</span><span class=\"cm-property\">strip</span><span>()</span><span>\n</span><span>    </span><span class=\"cm-variable\">payload</span><span> </span><span class=\"cm-operator\">=</span><span> {</span><span class=\"cm-string\">'name'</span><span>: </span><span class=\"cm-variable\">name</span><span>,</span><span>\n</span><span>               </span><span class=\"cm-string\">'passed'</span><span>: </span><span class=\"cm-variable\">status</span><span> </span><span class=\"cm-operator\">==</span><span> </span><span class=\"cm-string\">'PASS'</span><span>,</span><span>\n</span><span>               </span><span class=\"cm-string\">'tags'</span><span>: </span><span class=\"cm-variable\">tags</span><span>}</span><span>\n</span><span>    </span><span class=\"cm-variable\">headers</span><span> </span><span class=\"cm-operator\">=</span><span> {</span><span class=\"cm-string\">'Authorization'</span><span>: </span><span class=\"cm-string\">'Basic {0}'</span><span>.</span><span class=\"cm-property\">format</span><span>(</span><span class=\"cm-variable\">token</span><span>)}</span><span>\n\n</span><span>    </span><span class=\"cm-comment\"># Put test status to Sauce Labs</span><span>\n</span><span>    </span><span class=\"cm-variable\">url</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-string\">'https://saucelabs.com/rest/v1/{0}/jobs/{1}'</span><span>.</span><span class=\"cm-property\">format</span><span>(</span><span class=\"cm-variable\">username</span><span>, </span><span class=\"cm-variable\">job_id</span><span>)</span><span>\n</span><span>    </span><span class=\"cm-variable\">response</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">requests</span><span>.</span><span class=\"cm-property\">put</span><span>(</span><span class=\"cm-variable\">url</span><span>, </span><span class=\"cm-variable\">data</span><span class=\"cm-operator\">=</span><span class=\"cm-variable\">json</span><span>.</span><span class=\"cm-property\">dumps</span><span>(</span><span class=\"cm-variable\">payload</span><span>), </span><span class=\"cm-variable\">headers</span><span class=\"cm-operator\">=</span><span class=\"cm-variable\">headers</span><span>)</span><span>\n</span><span>    </span><span class=\"cm-keyword\">assert</span><span> </span><span class=\"cm-variable\">response</span><span>.</span><span class=\"cm-property\">status_code</span><span> </span><span class=\"cm-operator\">==</span><span> </span><span class=\"cm-number\">200</span><span>, </span><span class=\"cm-variable\">response</span><span>.</span><span class=\"cm-property\">text</span><span>\n\n</span><span>    </span><span class=\"cm-comment\"># Log video url from the response</span><span>\n</span><span>    </span><span class=\"cm-variable\">video_url</span><span> </span><span class=\"cm-operator\">=</span><span> </span><span class=\"cm-variable\">json</span><span>.</span><span class=\"cm-property\">loads</span><span>(</span><span class=\"cm-variable\">response</span><span>.</span><span class=\"cm-property\">text</span><span>).</span><span class=\"cm-property\">get</span><span>(</span><span class=\"cm-string\">'video_url'</span><span>)</span><span>\n</span><span>    </span><span class=\"cm-keyword\">if</span><span> </span><span class=\"cm-variable\">video_url</span><span>:</span><span>\n</span><span>        </span><span class=\"cm-variable\">logger</span><span>.</span><span class=\"cm-property\">info</span><span>(</span><span class=\"cm-string\">'&lt;a href=\"{0}\"&gt;video.flv&lt;/a&gt;'</span><span>.</span><span class=\"cm-property\">format</span><span>(</span><span class=\"cm-variable\">video_url</span><span>), </span><span class=\"cm-variable\">html</span><span class=\"cm-operator\">=</span><span class=\"cm-keyword\">True</span><span>)</span></code></pre>\n    </div>\n<p>Finally, we must install a couple of required Python libraries into our\nPython virtual environment with:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ robot</span><span>/bin/pip install simplejson requests</span></code></pre>\n    </div>\n<p>We are almost there!</p>\n<h2>Running a robot test suite with Sauce Labs</h2>\n<p>Once we have abstracted our test suite to support Sauce Labs with\nconfigurable suite variables, we can run the tests either locally, or\nusing Sauce Labs, or using different browsers at Sauce Labs, just by\nexecuting the Robot Framework test runner with different arguments.</p>\n<ol>\n<li>\n<p>To run the test suite locally, we simply type:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ robot</span><span>/bin/pybot test_saucelabs_login.robot</span></code></pre>\n    </div>\n</li>\n<li>\n<p>To run the test at Sauce Labs, we pass the Sauce Labs OnDemand\naddress as <code>${REMOTE_URL}</code> variable by using <code>-v</code> argument supported\nby the test runner:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ robot</span><span>/bin/pybot </span><span class=\"cm-attribute\">-v</span><span> REMOTE_URL:http://USERNAME:ACCESS_KEY@ondemand.saucelabs.com:80/wd/hub test_saucelabs_login.robot</span></code></pre>\n    </div>\n<p>Make sure to replace USERNAME and ACCESS_KEY with your Sauce Labs\naccount username and its current access key!</p>\n</li>\n<li>\n<p>To change the Sauce Labs test browser or platform, we just need to\nadd an another variable with <code>-v</code> to define the required browser in\n<code>${DESIRED_CAPABILITIES}</code> variable passed to Selenium.</p>\n<p>The only trick is to know the format used by the Selenium keyword\nlibrary: <a href=\"http://rtomac.github.io/robotframework-selenium2library/doc/Selenium2Library.html#Open%20Browser\">a comma separated string with\nKEY:VALUE-pairs</a>\nof the desired WebDriver capabilities.</p>\n<p>The full command to run the test suite with iPhone 7 browser at\nSauce Labs would look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ robot</span><span>/bin/pybot </span><span class=\"cm-attribute\">-v</span><span> DESIRED_CAPABILITIES:</span><span class=\"cm-string\">\"platform:OS X 10.9,browserName:iphone,version:7\"</span><span> </span><span class=\"cm-attribute\">-v</span><span> REMOTE_URL:http://USERNAME:ACCESS_KEY@ondemand.saucelabs.com:80/wd/hub test_saucelabs_login.robot</span></code></pre>\n    </div>\n</li>\n<li>\n<p>And to top the cake, we can also include our CI build number, just\nby adding the parameter into our desired capabilities string:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">$ robot</span><span>/bin/pybot </span><span class=\"cm-attribute\">-v</span><span> DESIRED_CAPABILITIES:</span><span class=\"cm-string\">\"build:demo,platform:OS X 10.9,browserName:iphone,version:7\"</span><span> </span><span class=\"cm-attribute\">-v</span><span> REMOTE_URL:http://USERNAME:ACCESS_KEY@ondemand.saucelabs.com:80/wd/hub test_saucelabs_login.robot</span></code></pre>\n    </div>\n</li>\n</ol>\n<p>This is how our final tests would look in the Sauce Labs test table,\nwith test names, tags, build numbers, results and all the stuff!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa1fbd31cd15999ac21551cba432059f/29007/saucelabs-table.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.4324324324324325%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAAsSAAALEgHS3X78AAAAO0lEQVQI1zXJQQrAIAxEUe9/yoiNHZ2obQOuLYKft/shF1M+7Zv9nXZweBQBQFIvLbVKS9mAG333L3dfmDs3NxH2gCAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/fa1fbd31cd15999ac21551cba432059f/fcda8/saucelabs-table.png\"\n        srcset=\"/static/fa1fbd31cd15999ac21551cba432059f/12f09/saucelabs-table.png 148w,\n/static/fa1fbd31cd15999ac21551cba432059f/e4a3f/saucelabs-table.png 295w,\n/static/fa1fbd31cd15999ac21551cba432059f/fcda8/saucelabs-table.png 590w,\n/static/fa1fbd31cd15999ac21551cba432059f/efc66/saucelabs-table.png 885w,\n/static/fa1fbd31cd15999ac21551cba432059f/c83ae/saucelabs-table.png 1180w,\n/static/fa1fbd31cd15999ac21551cba432059f/29007/saucelabs-table.png 1600w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Quite nice, isn’t it.</p>\n<p>P.S. The final example can be downloaded as a gist at:\n<a href=\"https://gist.github.com/datakurre/9589707\">https://gist.github.com/datakurre/9589707</a></p>\n<hr>\n<p>Written by <a href=\"http://datakure.pandala.org/\">Asko Soukka</a> — an occasional\n<a href=\"http://plone.org/\">Plone</a> core contributor and a full time web\ndeveloper at <a href=\"https://www.jyu.fi/en/\">University of Jyväskylä</a>, Finland.</p>","frontmatter":{"title":"Cross-Browser Selenium testing with Robot Framework and Sauce Labs","tags":["Python","Robot Framework","Sauce Labs","Selenium","Testing"],"date":"March 20, 2014","published":"2014-03-20 06:00:00"}}},"pageContext":{"slug":"/2014/03/cross-browser-selenium-testing-with.html/","previous":{"fields":{"slug":"/2014/02/my-week-of-plone-sprinting-with-friends.html/"},"frontmatter":{"title":"My week of Plone sprinting with friends and robots"}},"next":{"fields":{"slug":"/2014/05/asynchronous-stream-iterators-and.html/"},"frontmatter":{"title":"Asynchronous stream iterators and experimental promises for Plone"}}}},"staticQueryHashes":["63159454"],"slicesMap":{}}