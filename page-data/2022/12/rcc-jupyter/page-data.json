{"componentChunkName":"component---src-templates-blog-post-js","path":"/2022/12/rcc-jupyter/","result":{"data":{"site":{"siteMetadata":{"title":"Asko Soukka","author":"Asko Soukka"}},"markdownRemark":{"id":"d8ad592b-c073-509a-b437-9f012a39179e","fields":{"slug":"/2022/12/rcc-jupyter/"},"excerpt":"Nix way, RCC way, or the high way? I’m a fan of Project Jupyter, which develops and maintains interactive computing environments for all programming languages…","html":"<p><strong>Nix way, RCC way, or the high way?</strong></p>\n<p>I’m a fan of <a href=\"https://jupyter.org/\">Project Jupyter</a>, which develops and maintains interactive computing environments for all programming languages. Mostly known for <a href=\"https://jupyter.org/try\">JupyterLab</a> and <a href=\"https://jupyter.org/try\">Jupyter Notebook</a>. Yet, I use them much less than I’d like to. Most probably, because I am missing a convenient way to define and maintain local Jupyter environments within those projects where they could be useful.</p>\n<p>Q: <strong>Explain how declarative configuration differs from imperative configuration in a tweet.</strong></p>\n<p>A: <em>Declarative configuration focuses on what the desired end state should be, while imperative configuration focuses on the specific steps needed to achieve that end state. In declarative configuration, the system automatically sets up the necessary resources and configurations, whereas in imperative configuration, the user must explicitly define and execute each step. #declarativeconfig #imperativeconfig</em> -ChatGPT</p>\n<p>As of today, I might have found the way I have been looking for. Unfortunately, it might not be <a href=\"https://nixos.org/\">Nix</a>, but something else, that everyone can use in minutes. That said, let’s try out the Nix way at first.</p>\n<h2>Status quo: jupyterWith</h2>\n<p><a href=\"https://github.com/tweag/jupyterWith\">jupyterWith</a> is a project, which helps to define and maintain Jupyter environments with <a href=\"https://nixos.org\">Nix</a>, the purely functional package manager. Let’s assume that Nix has already been installed and “flakes” enabled as told in  <a href=\"https://jupyterwith.tweag.io/getting-started/\">withJupyter’s documentation</a>. Then we continue to follow the docs to create JupyterLab with <a href=\"https://pypi.org/project/robotkernel/\">Robot Framework kernel</a>.</p>\n<p>At first, we need to scaffold the base environment with:</p>\n<div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-solarized\"><code><span>$ nix flake init --template github:tweag/jupyterWith\nwrote: .../flake.nix\nwrote: .../default.nix\nwrote: .../kernels/python\nwrote: .../kernels\n\n    You have created a jupyterWith template.\n\n    Run nix run to immediately try it out.\n\n    See the jupyterWith documentation for more information.\n\n    https://github.com/tweag/jupyterWith/blob/main/docs/how-to.md\n    https://github.com/tweag/jupyterWith/blob/main/docs/tutorials.md</span></code></pre>\n    </div>\n<p>And then we are able to start the default setup with:</p>\n<div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-solarized\"><code><span>$ nix run</span></code></pre>\n    </div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e4e185646dd5559daabf67c7b31a3074/4352a/jupyterwith-00.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQoz41SXW/DIAzM//9be+3zNKmrlC5tSlKSAAEC5OOGqZg0dWt7khXjmPNhu3gvr3j74LBGwxiDU33BmV2hrAfvepRliePx+NQor65rFOWJoRUW3ntM0wQzOWxLgOtbWBfgQ/Sde2oh5jVNg+J8qqCVTIRVVSVSAmu+oj8CXuNVSClRcN7Fiw7rukII+UPIuya2QUEPLZZlSbFt2/41ghACRSbIF4KPT5g3HJjGHDzWmLs+ILojpEFkkJJc4NLGVhiJqw5JPbYXFVprfxFSg9coq49Pdm7CaOyN8AH+JKQgEdJwyPb7zzS5eQ5Y5gWLj8ViC0Kym+qsLhe86yH9IIWE3W6X9op3PA7GYKhGtH0NKVjcO9oGe6dUKYWi73uM45jYqZ80+nwmn77DMGAQA5S8xTjnKa61TrnZGGP4BuK1B3+3bJ7EAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Default JupyterLab using JupyterWith\"\n        title=\"Default JupyterLab using JupyterWith\"\n        src=\"/static/e4e185646dd5559daabf67c7b31a3074/fcda8/jupyterwith-00.png\"\n        srcset=\"/static/e4e185646dd5559daabf67c7b31a3074/12f09/jupyterwith-00.png 148w,\n/static/e4e185646dd5559daabf67c7b31a3074/e4a3f/jupyterwith-00.png 295w,\n/static/e4e185646dd5559daabf67c7b31a3074/fcda8/jupyterwith-00.png 590w,\n/static/e4e185646dd5559daabf67c7b31a3074/efc66/jupyterwith-00.png 885w,\n/static/e4e185646dd5559daabf67c7b31a3074/c83ae/jupyterwith-00.png 1180w,\n/static/e4e185646dd5559daabf67c7b31a3074/4352a/jupyterwith-00.png 1364w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Although, this gives us JupyterLab with only plain Python kernel. It’s good to know that jupyterWith properly separates JupyterLab from its kernels, and is then able to support any number of different kernels or configurations in a single environment. Thankfully, to get started with custom kernel configuration, it has already created us a template for Python kernel with custom packages.</p>\n<p>But it took a couple of hours for me to figure out, how to customize jupyterWith’s Python kernel setup to run Python based RobotFramework kernel instead. That required defining a Python environment with <a href=\"https://pypi.org/project/robotkernel/\">RobotKernel</a> into the Python custom kernel template at <code>./kernels/python</code> with <a href=\"https://python-poetry.org/\">Poetry</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-solarized\"><code><span>$ poetry init\n\nThis command will guide you through creating your pyproject.toml config.\n\nPackage name [python]:  robotkernel-env\n\nWould you like to define your main dependencies interactively? (yes/no) [yes]\n\nSearch for package to add (or leave blank to continue): robotkernel\n\nEnter package # to add, or the complete package name if it is not listed:\n [0] robotkernel\n [1] jupyterlite-robotkernel\n &gt; 0\n\nDo you confirm generation? (yes/no) [yes]</span></code></pre>\n    </div>\n<p>And, of course, lock its dependencies:</p>\n<div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-solarized\"><code><span>$ poetry lock\nCreating virtualenv robotkernel-env-aFhfNoGt-py3.9 in .../.cache/pypoetry/virtualenvs\nUpdating dependencies\nResolving dependencies... (31.3s)\n\nWriting lock file</span></code></pre>\n    </div>\n<p>And, finally, the hard part… With the following <code>./kernels/python/default.nix</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-solarized\"><code><span>{\n  name,\n  availableKernels,\n  extraArgs,\n}:\nlet base = availableKernels.python {\n  projectDir = ./.;\n  displayName = \"Robot Framework\";\n  name = \"robotframework\";\n  preferWheels = true;\n}; in {\n  path = ./kernel.nix;\n  args = base.args // { inherit (base) path; };\n}</span></code></pre>\n    </div>\n<p>And <code>./kernels/python/kernel.nix</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-solarized\"><code><span>args@{ path, ...}:\n\nlet\n  base = import path (builtins.removeAttrs args [ \"path\" ]);\nin base // {\n  argv = [\n    (builtins.head base.argv)\n    \"-m\"\n    \"robotkernel.kernel\"\n    \"-f\"\n    \"{connection_file}\"\n  ];\n  language = \"robotframework\";\n  codemirrorMode = \"robotframework\";\n}</span></code></pre>\n    </div>\n<p>I was able to have my declarative JupyterLab with Robot Framework kernel started simply with re-running <code>nix run</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e2a8d2d514d75d18ac63b14d2d8e96d4/4352a/jupyterwith-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABQklEQVQoz41SXW+DMAzk//+sPfd5mtRVooLSQAMJAUK+4BZnysPUru1JVhLHOTtnF5/lDR9fHHqZsSwL6uaKC7tBaQveDyjLEufz+aVRXNM0KMqaoZMa1his64plNdiDgxk6aONgnYeJd6/MOYe2bVFc6gqTkvDeo65r6FWDwNoqJpgALYB9xzsYxxEF532qbI+PlFJpT+B9G2VQUJwhhJB8FPOfEaSUKDJBfuBs/ILfcWIzvLMIT0geElIjMqiSnODaVZiXEc0YSbft/Qq11n8ISeBt2zHELxuzQqopnren2j0kJCcRWmuTHY/fqXMheAQfEGxMFiVwyVxKkqvLCe80pAuqkHA4HNJc8Z5jFgtENaEbGoySxbmjCdB3lVJTi2EYME1TYic9qfX5THtahRAQUkCNvz7OefLP85xiszHG8AO9kgdpm+bPjwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JupyterLab using JupyterWith with Robot Framework kernel\"\n        title=\"JupyterLab using JupyterWith with Robot Framework kernel\"\n        src=\"/static/e2a8d2d514d75d18ac63b14d2d8e96d4/fcda8/jupyterwith-01.png\"\n        srcset=\"/static/e2a8d2d514d75d18ac63b14d2d8e96d4/12f09/jupyterwith-01.png 148w,\n/static/e2a8d2d514d75d18ac63b14d2d8e96d4/e4a3f/jupyterwith-01.png 295w,\n/static/e2a8d2d514d75d18ac63b14d2d8e96d4/fcda8/jupyterwith-01.png 590w,\n/static/e2a8d2d514d75d18ac63b14d2d8e96d4/efc66/jupyterwith-01.png 885w,\n/static/e2a8d2d514d75d18ac63b14d2d8e96d4/c83ae/jupyterwith-01.png 1180w,\n/static/e2a8d2d514d75d18ac63b14d2d8e96d4/4352a/jupyterwith-01.png 1364w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ac804a05769523edbad3555de49cb99/4352a/jupyterwith-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQoz6WSyU7DMBCG/f5PwwXxABxRJQ4IgVRI0jh2MNnqxHaWNj8eVylhuVBG+jWOM/pmM3uM33H7VMCaDsYYcJ4h4QLaOBRlhSSOsdvtkKbpFy135KMowna7hRACLEolZGVhXQ9jLVqt0XZdgO33e1TVybdtC03/vF+L7pRSQVmWgSnJMfcawBG1EqhbB91Z5LlEXdfo+x7WJyI5587nRZ1PTqLuyrIEu3sWuNoo3Dw0uN4I3MdNAEavL0iSBLFvmXMe2mma5gxYtK48ACvtyeaINz2h6ibEygfZESJXocKiKIKnYKpoHEcMw/BD0zSFONY7i087hhZnXGY0a0ZZyWZPORwOAXj6nv8kMhrJCjgHIA3+X8AFsEBoRpcaLYfRO6MNEZ1mkOd5OH9/b7+9P1oYLWtZmpQSH6CsAveSWpeHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Robot Framework kernel in action\"\n        title=\"Robot Framework kernel in action\"\n        src=\"/static/9ac804a05769523edbad3555de49cb99/fcda8/jupyterwith-02.png\"\n        srcset=\"/static/9ac804a05769523edbad3555de49cb99/12f09/jupyterwith-02.png 148w,\n/static/9ac804a05769523edbad3555de49cb99/e4a3f/jupyterwith-02.png 295w,\n/static/9ac804a05769523edbad3555de49cb99/fcda8/jupyterwith-02.png 590w,\n/static/9ac804a05769523edbad3555de49cb99/efc66/jupyterwith-02.png 885w,\n/static/9ac804a05769523edbad3555de49cb99/c83ae/jupyterwith-02.png 1180w,\n/static/9ac804a05769523edbad3555de49cb99/4352a/jupyterwith-02.png 1364w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Unfortunately, even after all that, my JupyterLab was still missing syntax highlighting for Robot Framework code. That would have required additional configuration for Nix-packaging and installation of <a href=\"https://pypi.org/project/jupyterlab-robotmode/\">jupyterlab-robotmode</a> extension into the Python environment of JupyterLab itself.</p>\n<p>According to jupyterWith’s documentation. They are still working on to support declarative configuration for extensions… Fair enough.</p>\n<h2>Contender: RCC</h2>\n<p>How about the challenger? <a href=\"https://robocorp.com/docs/rcc/overview\">RCC</a> is an open source environment management and task execution tool from <a href=\"https://robocorp.com\">Robocorp</a>. Initially designed to manage environments and execution of Robot Framework and Python RPA bots, but technically generic enough to manage any environment based on packages available at <a href=\"https://conda.io/\">Conda</a> <a href=\"https://anaconda.org/search\">repositories</a> or installable with <a href=\"https://pypi.org/project/pip/\">Pip</a>. (Under the hood it is using <a href=\"https://docs.conda.io/en/latest/miniconda.html\">Miniconda</a> as its package manager.)</p>\n<p>RCC is installed usually just by <a href=\"https://downloads.robocorp.com/rcc/releases/index.html\">downloading a precompiled binary</a>. Then it requires two files to built the environment and start a program from it. So, let’s have <code>conda.yaml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-atom\">channels</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-meta\">  - </span><span>conda-forge</span><span>\n</span><span class=\"cm-atom\">dependencies</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-meta\">  - </span><span>jupyterlab</span><span>\n</span><span class=\"cm-meta\">  - </span><span class=\"cm-atom\">pip</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-meta\">      - </span><span>robotkernel</span><span>\n</span><span class=\"cm-meta\">      - </span><span>jupyterlab-robotmode</span></code></pre>\n    </div>\n<p>And <code>robot.yaml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-atom\">tasks</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-atom\">  lab</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-atom\">    shell</span><span class=\"cm-meta\">: </span><span>jupyter lab</span><span>\n</span><span class=\"cm-atom\">condaConfigFile</span><span class=\"cm-meta\">:</span><span>\n</span><span>  conda.yaml</span><span>\n</span><span class=\"cm-atom\">artifactsDir</span><span class=\"cm-meta\">:</span><span>\n</span><span>  .</span></code></pre>\n    </div>\n<p>Once these are in place, the sole task from <code>robot.yaml</code> run from the environment defined in <code>conda.yaml</code> can be run with:</p>\n<div class=\"gatsby-highlight\" data-language=\"null\">\n      <pre class=\" cm-s-solarized\"><code><span>$ rcc task run</span></code></pre>\n    </div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5c432c6532f3b2b4ab8f53f7f293a819/4352a/rcc-00.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQoz5VSy26DMBDk/z+rp0bKmR4SCSJSY8CxeRpsDFOvK+fQtE270mhh1oyH3U3SvMHLm8A0jR4TrqzEO2/Qawtxk8iyDJfL5SnyPAdjDElWlKhbDWMM5nnGNC/YnYWRNfRigX0PtWVZfoW1FlVVIWnKEn2rglhRFCFT8OqKYexwPp+xbRv+El3XIWmlgtYa67oGIgo2gmHoFdI0DTWK3bv9CRRt2yKJAvEDa/wvrDuySsOt9qnQgyC5i+GcuztkdeEPNDi8Hv7n8KsgNXjbdgjBsczaZ/G0h98KEkmCNFHCyQ+DJkdibnVwxl9mjefMnY/u4oUPPaQCOaQ4Ho9hr8RNYFQTVDGglgxdy/3e0TboB6d93yORUmIYhqBOi02Tju/0TFkpBeVXq+8+OWoD8eM4hrMRnHN8AHIBBiwehQeNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JupyterLab using RCC with Robot Framework kernel\"\n        title=\"JupyterLab using RCC with Robot Framework kernel\"\n        src=\"/static/5c432c6532f3b2b4ab8f53f7f293a819/fcda8/rcc-00.png\"\n        srcset=\"/static/5c432c6532f3b2b4ab8f53f7f293a819/12f09/rcc-00.png 148w,\n/static/5c432c6532f3b2b4ab8f53f7f293a819/e4a3f/rcc-00.png 295w,\n/static/5c432c6532f3b2b4ab8f53f7f293a819/fcda8/rcc-00.png 590w,\n/static/5c432c6532f3b2b4ab8f53f7f293a819/efc66/rcc-00.png 885w,\n/static/5c432c6532f3b2b4ab8f53f7f293a819/c83ae/rcc-00.png 1180w,\n/static/5c432c6532f3b2b4ab8f53f7f293a819/4352a/rcc-00.png 1364w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>This was all that was required to have a declaratively configured JupyterLab launched from a project directory. And this time also syntax highlighting was enabled:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf465a343fd5e9ac4926bd2bddbaa7d7/4352a/rcc-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABY0lEQVQoz52Sy07DMBBF8/8/g9jwAWy7YFFEJUQakjTvR20nthPncfEYqpa2YsFIR7YTz52byXhvnxWedzUEZ5BS4nBIEB1SCKlQ1Q3CMEQURZYYcXyGnp3WIAjg+z7SNIW3jzNkRwU9DJBKg3MO0SmURQ/GONpjAyE4uq6ziJ/1jBACRVE4kiSBx8ocs2IAJrRlBmMGqH5GGnZgtcSgJ+vcFpMaShHqBq01xnFE27bwXt4LPGxyPG2PeNwkqLm0FwxeP0rsggTb/R5+VCE+WOfWcW/b0vf9DdQuJ9hYgUauKLsJVWdswgA9GvhljJynth0NWi5Qs865ISeDbc8l5JBWJzhohXMsYLZ/o1mwTAvWebXY/Tw7pmm6gQr8EqSqFOsKzDaJXnyf17tcxvWZfuiF4OoEqdpfgvdYlsXlMMbgnQROIsYY/DdohDz6bponUifLeZ67/fW83aNpGgdpEFmW4Qt5wQKqh/fVzwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Robot Framework kernel in action\"\n        title=\"Robot Framework kernel in action\"\n        src=\"/static/bf465a343fd5e9ac4926bd2bddbaa7d7/fcda8/rcc-01.png\"\n        srcset=\"/static/bf465a343fd5e9ac4926bd2bddbaa7d7/12f09/rcc-01.png 148w,\n/static/bf465a343fd5e9ac4926bd2bddbaa7d7/e4a3f/rcc-01.png 295w,\n/static/bf465a343fd5e9ac4926bd2bddbaa7d7/fcda8/rcc-01.png 590w,\n/static/bf465a343fd5e9ac4926bd2bddbaa7d7/efc66/rcc-01.png 885w,\n/static/bf465a343fd5e9ac4926bd2bddbaa7d7/c83ae/rcc-01.png 1180w,\n/static/bf465a343fd5e9ac4926bd2bddbaa7d7/4352a/rcc-01.png 1364w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Looks like we have a winner!</p>\n<h2>How about reproducibility?</h2>\n<p>Was this a fair comparison? Not completely. Nix package manager is built to maximize reproducibility, while Conda used by RCC promises more like “best effort” for it. Also, jupyterWith is clearly desiged to support even complex JupyterLab environments with multiple kernels. Meanwhile my current use case required only one kernel at time, and mostly based on Python. Therefore installing kernel packages into the same environment with JupyterLab itself is feasible.</p>\n<p>That said, RCC tries its best to make the environment as reproducible as possible with Conda. When <code>rcc task run</code> is run with ambiquous <code>conda.yaml</code>, it also generates <code>environment_[system]_[arch]_freeze.yaml</code> (e.g. <code>environment_linux_amd64_freeze.yaml</code>) with all the installed packages:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-atom\">channels</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-meta\">- </span><span>conda-forge</span><span>\n</span><span class=\"cm-atom\">dependencies</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-meta\">- </span><span>_libgcc_mutex=0.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>_openmp_mutex=4.5</span><span>\n</span><span class=\"cm-meta\">- </span><span>anyio=3.6.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>argon2-cffi=21.3.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>argon2-cffi-bindings=21.2.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>asttokens=2.2.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>attrs=22.1.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>babel=2.11.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>backcall=0.2.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>backports=1.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>backports.functools_lru_cache=1.6.4</span><span>\n</span><span class=\"cm-meta\">- </span><span>beautifulsoup4=4.11.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>bleach=5.0.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>brotlipy=0.7.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>bzip2=1.0.8</span><span>\n</span><span class=\"cm-meta\">- </span><span>ca-certificates=2022.12.7</span><span>\n</span><span class=\"cm-meta\">- </span><span>certifi=2022.12.7</span><span>\n</span><span class=\"cm-meta\">- </span><span>cffi=1.15.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>charset-normalizer=2.1.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>cryptography=38.0.4</span><span>\n</span><span class=\"cm-meta\">- </span><span>debugpy=1.6.4</span><span>\n</span><span class=\"cm-meta\">- </span><span>decorator=5.1.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>defusedxml=0.7.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>entrypoints=0.4</span><span>\n</span><span class=\"cm-meta\">- </span><span>executing=1.2.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>flit-core=3.8.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>idna=3.4</span><span>\n</span><span class=\"cm-meta\">- </span><span>importlib-metadata=5.1.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>importlib_resources=5.10.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>ipykernel=6.14.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>ipython=8.4.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>ipython_genutils=0.2.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>jedi=0.18.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>jinja2=3.1.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>json5=0.9.5</span><span>\n</span><span class=\"cm-meta\">- </span><span>jsonschema=4.17.3</span><span>\n</span><span class=\"cm-meta\">- </span><span>jupyter_client=7.4.8</span><span>\n</span><span class=\"cm-meta\">- </span><span>jupyter_core=5.1.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>jupyter_events=0.5.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>jupyter_server=2.0.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>jupyter_server_terminals=0.4.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>jupyterlab=3.5.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>jupyterlab_pygments=0.2.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>jupyterlab_server=2.16.5</span><span>\n</span><span class=\"cm-meta\">- </span><span>ld_impl_linux-64=2.39</span><span>\n</span><span class=\"cm-meta\">- </span><span>libffi=3.4.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>libgcc-ng=12.2.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>libgomp=12.2.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>libnsl=2.0.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>libsodium=1.0.18</span><span>\n</span><span class=\"cm-meta\">- </span><span>libsqlite=3.40.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>libstdcxx-ng=12.2.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>libuuid=2.32.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>libzlib=1.2.13</span><span>\n</span><span class=\"cm-meta\">- </span><span>markupsafe=2.1.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>matplotlib-inline=0.1.6</span><span>\n</span><span class=\"cm-meta\">- </span><span>mistune=2.0.4</span><span>\n</span><span class=\"cm-meta\">- </span><span>nbclassic=0.4.8</span><span>\n</span><span class=\"cm-meta\">- </span><span>nbclient=0.7.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>nbconvert=7.2.6</span><span>\n</span><span class=\"cm-meta\">- </span><span>nbconvert-core=7.2.6</span><span>\n</span><span class=\"cm-meta\">- </span><span>nbconvert-pandoc=7.2.6</span><span>\n</span><span class=\"cm-meta\">- </span><span>nbformat=5.7.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>ncurses=6.3</span><span>\n</span><span class=\"cm-meta\">- </span><span>nest-asyncio=1.5.6</span><span>\n</span><span class=\"cm-meta\">- </span><span>notebook=6.5.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>notebook-shim=0.2.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>openssl=3.0.7</span><span>\n</span><span class=\"cm-meta\">- </span><span>packaging=22.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>pandoc=2.19.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>pandocfilters=1.5.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>parso=0.8.3</span><span>\n</span><span class=\"cm-meta\">- </span><span>pexpect=4.8.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>pickleshare=0.7.5</span><span>\n</span><span class=\"cm-meta\">- </span><span>pip=22.3.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>pkgutil-resolve-name=1.3.10</span><span>\n</span><span class=\"cm-meta\">- </span><span>platformdirs=2.6.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>prometheus_client=0.15.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>prompt-toolkit=3.0.36</span><span>\n</span><span class=\"cm-meta\">- </span><span>psutil=5.9.4</span><span>\n</span><span class=\"cm-meta\">- </span><span>ptyprocess=0.7.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>pure_eval=0.2.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>pycparser=2.21</span><span>\n</span><span class=\"cm-meta\">- </span><span>pygments=2.13.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>pyopenssl=22.1.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>pyrsistent=0.19.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>pysocks=1.7.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>python=3.10.8</span><span>\n</span><span class=\"cm-meta\">- </span><span>python-dateutil=2.8.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>python-fastjsonschema=2.16.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>python-json-logger=2.0.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>python_abi=3.10</span><span>\n</span><span class=\"cm-meta\">- </span><span>pytz=2022.6</span><span>\n</span><span class=\"cm-meta\">- </span><span>pyyaml=6.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>pyzmq=24.0.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>readline=8.1.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>requests=2.28.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>send2trash=1.8.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>setuptools=65.5.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>six=1.16.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>sniffio=1.3.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>soupsieve=2.3.2.post1</span><span>\n</span><span class=\"cm-meta\">- </span><span>stack_data=0.6.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>terminado=0.15.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>tinycss2=1.2.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>tk=8.6.12</span><span>\n</span><span class=\"cm-meta\">- </span><span>tomli=2.0.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>tornado=6.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>traitlets=5.7.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>typing_extensions=4.4.0</span><span>\n</span><span class=\"cm-meta\">- </span><span>tzdata=2022g</span><span>\n</span><span class=\"cm-meta\">- </span><span>urllib3=1.26.13</span><span>\n</span><span class=\"cm-meta\">- </span><span>wcwidth=0.2.5</span><span>\n</span><span class=\"cm-meta\">- </span><span>webencodings=0.5.1</span><span>\n</span><span class=\"cm-meta\">- </span><span>websocket-client=1.4.2</span><span>\n</span><span class=\"cm-meta\">- </span><span>wheel=0.38.4</span><span>\n</span><span class=\"cm-meta\">- </span><span>xz=5.2.6</span><span>\n</span><span class=\"cm-meta\">- </span><span>yaml=0.2.5</span><span>\n</span><span class=\"cm-meta\">- </span><span>zeromq=4.3.4</span><span>\n</span><span class=\"cm-meta\">- </span><span>zipp=3.11.0</span><span>\n</span><span class=\"cm-meta\">- </span><span class=\"cm-atom\">pip</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-meta\">  - </span><span>arrow==1.2.3</span><span>\n</span><span class=\"cm-meta\">  - </span><span>backports.functools-lru-cache==1.6.4</span><span>\n</span><span class=\"cm-meta\">  - </span><span>docutils==0.19</span><span>\n</span><span class=\"cm-meta\">  - </span><span>fastjsonschema==2.16.2</span><span>\n</span><span class=\"cm-meta\">  - </span><span>flit_core==3.8.0</span><span>\n</span><span class=\"cm-meta\">  - </span><span>fqdn==1.5.1</span><span>\n</span><span class=\"cm-meta\">  - </span><span>importlib-resources==5.10.1</span><span>\n</span><span class=\"cm-meta\">  - </span><span>ipython-genutils==0.2.0</span><span>\n</span><span class=\"cm-meta\">  - </span><span>ipywidgets==8.0.3</span><span>\n</span><span class=\"cm-meta\">  - </span><span>isoduration==20.11.0</span><span>\n</span><span class=\"cm-meta\">  - </span><span>jsonpointer==2.3</span><span>\n</span><span class=\"cm-meta\">  - </span><span>jupyter-events==0.5.0</span><span>\n</span><span class=\"cm-meta\">  - </span><span>jupyterlab-pygments==0.2.2</span><span>\n</span><span class=\"cm-meta\">  - </span><span>jupyterlab-robotmode==0.3.1</span><span>\n</span><span class=\"cm-meta\">  - </span><span>jupyterlab-widgets==3.0.4</span><span>\n</span><span class=\"cm-meta\">  - </span><span>lunr==0.6.2</span><span>\n</span><span class=\"cm-meta\">  - </span><span>notebook_shim==0.2.2</span><span>\n</span><span class=\"cm-meta\">  - </span><span>Pillow==9.3.0</span><span>\n</span><span class=\"cm-meta\">  - </span><span>pkgutil_resolve_name==1.3.10</span><span>\n</span><span class=\"cm-meta\">  - </span><span>prometheus-client==0.15.0</span><span>\n</span><span class=\"cm-meta\">  - </span><span>pure-eval==0.2.2</span><span>\n</span><span class=\"cm-meta\">  - </span><span>rfc3339-validator==0.1.4</span><span>\n</span><span class=\"cm-meta\">  - </span><span>rfc3986-validator==0.1.1</span><span>\n</span><span class=\"cm-meta\">  - </span><span>robotframework==6.0.1</span><span>\n</span><span class=\"cm-meta\">  - </span><span>robotkernel==1.6</span><span>\n</span><span class=\"cm-meta\">  - </span><span>stack-data==0.6.2</span><span>\n</span><span class=\"cm-meta\">  - </span><span>uri-template==1.2.0</span><span>\n</span><span class=\"cm-meta\">  - </span><span>webcolors==1.12</span><span>\n</span><span class=\"cm-meta\">  - </span><span>widgetsnbextension==4.0.4</span></code></pre>\n    </div>\n<p>Adding this to <code>robot.yaml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-atom\">tasks</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-atom\">  notebook</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-atom\">    shell</span><span class=\"cm-meta\">: </span><span>jupyter lab</span><span>\n</span><span class=\"cm-atom\">condaConfigFile</span><span class=\"cm-meta\">:</span><span>\n</span><span>  conda.yaml</span><span>\n</span><span class=\"cm-atom\">artifactsDir</span><span class=\"cm-meta\">:</span><span>\n</span><span>  .</span><span>\n</span><span class=\"cm-atom\">environmentConfigs</span><span class=\"cm-meta\">:</span><span>\n</span><span class=\"cm-meta\">- </span><span>environment_linux_amd64_freeze.yaml</span></code></pre>\n    </div>\n<p>should help the environment to build and run with the same version also on other machines.</p>\n<p>P.S. You may disable RCC telemetry with <code>rcc configuration identity -t</code>.</p>\n<p>P.P.S. Check RCC authors <a href=\"https://github.com/robocorp/rcc/blob/master/docs/recipes.md\">Tips, tricks, and recipies</a> for more interesting features and use cases.</p>","frontmatter":{"title":"Exploring two alternative declarative roads to Jupyter","tags":["Jupyter","Robot Framework","RCC","Nix","Open Source"],"date":"December 16, 2022","published":"2022-12-16 12:00:00"}}},"pageContext":{"slug":"/2022/12/rcc-jupyter/","previous":{"fields":{"slug":"/2022/12/robot-framework-rcc-camunda/"},"frontmatter":{"title":"How Robot Framework and RCC align with Camunda Platform for process automation"}},"next":{"fields":{"slug":"/2023/03/rcc-camunda-cloud/"},"frontmatter":{"title":"Orchestrating open-source RPA with Camunda Cloud"}}}},"staticQueryHashes":["63159454"],"slicesMap":{}}