{"componentChunkName":"component---src-templates-blog-post-js","path":"/2017/10/building-instant-features-with-advanced.html/","result":{"data":{"site":{"siteMetadata":{"title":"Asko Soukka","author":"Asko Soukka"}},"markdownRemark":{"id":"74c01ca9-8109-550f-ad93-70756c0342f9","fields":{"slug":"/2017/10/building-instant-features-with-advanced.html/"},"excerpt":"Plone, ”The Ultimate Enterprise CMS”, ships with\nbuilt-in batteries for building sophisticated content management\nsolutions without writing a single line of new…","html":"<p>Plone, ”<a href=\"https://plone.com/\">The Ultimate Enterprise CMS</a>”, ships with\nbuilt-in batteries for building sophisticated content management\nsolutions without writing a single line of new Python code. For example,\na fresh installation of Plone allows to build custom structured content\ntypes with custom HTML views, define custom state based workflows,\ncustomize various user interface elements, and finish the user\nexperience by configuring custom event triggered content rules to react\non users’ actions. Not to mention the Diazo based theming tool, which\nallows unlimited tweaking of the resulting HTML.</p>\n<p><strong>All this by just clicking and typing things through-the-web (TTW) with\nyour browser.</strong></p>\n<p>Yet, still some say that Plone is a difficult to customize and extend.</p>\n<p>The flip side of customizing Plone TTW is that it’s way too easy to\nlost track of your customizations. That adds to technical debt and\ntherefore cost of maintaining those customizations over years and\nupgrades to future Plone releases. The suggested solution to avoid those\nproblems has long been to avoid TTW customizations altogether, in favor\nof customizing everything using “buildout-installed file-system Python\npackages”. But that makes customizing Plone feel unnecessary difficult\nand technical.</p>\n<p>At <a href=\"https://2017.ploneconf.org/\">Plone Conference 2017</a> <a href=\"https://github.com/datakurre/ploneconf2017\">I gave a\ntalk</a>, where I showed an\nalternative way for this: if it was possible to bundle all those\ncustomizations together, for example in TTW managed theme, maintaining\nthose customizations would no longer be the blocker.</p>\n<p>Customizing Plone could be made easy again.</p>\n<h2>Requirements</h2>\n<p>Technically, Plone has supported exporting and importing most of the\npossible TTW customizations for more than ten years, but the user\ninterface for that has been cumbersomely technical. Finally, Plone 4.1\nintroduced a new <a href=\"http://docs.diazo.org/\">Diazo</a> based theming feature\nwith easy to use theming control panel and theme editor. And now, with\nonly a couple of extra packages in your Plone setup, Plone theming\nfeatures get super powers to apply site customizations with any theme.</p>\n<p>To complete the following example, you need a Plone site with these two\nextra Python packages installed:\n<a href=\"https://pypi.python.org/pypi/collective.themesitesetup\">collective.themesitesetup</a>\nand\n<a href=\"https://pypi.python.org/pypi/collective.themefragments\">collective.themefragments</a>.</p>\n<p>As usual, those can be installed by customizing and running buildout</p>\n<div class=\"gatsby-highlight\" data-language=\"properties\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-header\">[instance]</span><span>\n</span><span class=\"cm-def\">eggs </span><span>=</span><span>\n</span><span class=\"cm-def\">    ...</span><span>\n</span><span class=\"cm-def\">    collective.themesitesetup</span><span>\n</span><span class=\"cm-def\">    collective.themefragments</span></code></pre>\n    </div>\n<p>or you can try out with the official Plone docker image:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\" cm-s-solarized\"><code><span>$ docker run -p 8080:8080 -e PLONE_ADDONS=\"collective.themesitesetup collective.themefragments\" plone fg</span></code></pre>\n    </div>\n<h2>Case of the day: Wall of images</h2>\n<p>As an example feature, we build a simple folder view that displays a\nlist of varying size images in an optimal grid layout using popular\n<a href=\"https://masonry.desandro.com/\">Masonry.js</a> layout library, with help an\nanother library called\n<a href=\"https://imagesloaded.desandro.com/\">imagesLoaded</a>.</p>\n<p>To summarize, building that view requires:</p>\n<ul>\n<li>Providing JS bundles for both Masonry and imagesLoaded</li>\n<li>Registering those bundles into Plone resource registry</li>\n<li>A folder view template that renders images in that folder</li>\n<li>Way to configure that view on a folder</li>\n<li>JS code to initialize Masonry layout on that view</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 320px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b60945a7eee3aefafd38861d771d873c/72799/three-columns.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 96.62162162162163%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAAFYklEQVQ4y5WUi09TVxzHb0w2FzO3RQfXxGVbtmTGZS5qJCrDIaLCRBQoDBBES4FKBGp5TBTbMphTqFRBiyjqBHmMh7wp5VEeF+RRy8sXirSUltbLKPjONujtdxfn/oCd5JPfK+ebX875nUNUpFxdrL+rEY8ZtZlPpy0ZUyazjDY/kdFPaJnFYpHNzszK/piakum0OtkTNv90dlY2PW2RTRom32A0GDPYfCbri+UX5IuJiNBwO51W+9owacLouBGjOiMmDCaYzU8wyeb0+gnoxycwNqaDVqeHwWjCpGmhZn7DOFubMExidHTsta+vnx3BDw8jgXkT2DVomJ27Z342P2CcndcYZuZhY+YB21vwL8zcPP56xdbm3sS2V8/m2Jh1rSY+L5QkVm33sj9Q3EXzbqpxoKSX+bVhyFbR+dD2e8eIrZR68IYylvgqjS2krM92sLTXFlzUZQsq7LRx2Ti0XM2wYEFj1Q5ve2K9mxeZVNFFi2rUOKXsZ3Kb+1HfOYTajkEobt2FsucBVJpRyBr7IapTQ1LbhxPVvRCxVlTTC0mdmhHXa3DsZie9bscekuAGBZAW3T36lXkME/cHmCndCMy6R3gxQ2NY3YFuVT26WhTQ3b0N7WAfLGwNf78AXlrAPJvGS7OemTNr8efUOB3JHh8h/ElIll6X0+VXc6Bub2P6u3qgKKqAyWhGrICP6NAgZKedRuHlK9A+HmMvxYhz6WkQHorElZwcZEpPM/H8MFSXXKcPR0WRRLo0lYwI2U/vdHJDGFfA+HN42OPmCz5PgACOF9as+houTjvwnYMzRMd/RquiBmvXOsLP3Q152VJknZQw3ttdcUIYTbe2K9kOw7mks8NmeskSO9gtXcGs/PhLfLp8JTZv2ALB/kB8teITvPvOh1j63vssH8GfFRLHR+J4ZCAyT8Yj9Vg8ExcSiLzci/Q+b1eSSEk6Ql6SJNKcHzzhu8uL8fHwQah/AI7HxSPp0H7sdPgW69c6sF1uhYujE8SxMagqOI/jAh5+iQuFLJ7LJIb44LfsTPpIDI8k+JGR5KDmNq1qbIaG6mDGhtWgVEo01VUiW5qMNEksCm7kQtWsQG9fF8bZoR5lB7mlrQmabhVGhnoY3fgjqIcGaE9PT5IICvYn93n50nGHDkPVpGRyzkoRwxegoaYOaWfScCRWiOzzGYjmR4DHDYV6cAC1NeVobm9Fe0MF7mkoxmCawMD9+7SnhztJeO/1JL13etC7v3dBftYpRpqRBvnpZJyTSpGeLESC8DCSEoRw3uKKbS47UdPShvwb11CjqENtdTEKrl9iBof78Uivp11dtpJESACHXP2NA73ms8+RnxrFFMlTwA/mIDkqCIkJcRCJJeBH8MHx4SA67hga2juQk3MBaeknEXGQC3dXd0aUmIi+4WE6jMsliYU2s+QX6eK8q6gqzmbUVDVUymq0NtZhYFSLqqZG1Le1Q8EK3RoawtDDERRdyURVSTESYmKxxWEj47d7L67l59GxEjFJuG9ztle2Npk1d/pxOVc+f+Z8tvVmRZl1+vmMtUdz21rZorIWlJVYS6orrZWNSus9rdaan3PGmpkqse7zP2DdtHHrfAyPh7DoWHNh2Q17IiTQj8wrzHsuZV9DMCcAft4BOBIeAYWyHrlnRaiorUJ9dSludzVCfWcQj9kv7VTyCbht2oAvVm+E87Zd2LPXDwJxxvNs+RmS8Pf3XXZJnlF+VBDT7bp1e4ezoyPl4epGicQplFh0lDqWlEjJzqZR8qx0qqC8jKpraqZ+5HCozevWUz5evpSrk2PHXu+gbkGipDw4OGgZwa5FLB+wfMyy/K39P/y3Z0Fj0T9G97v8HUsU2gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/b60945a7eee3aefafd38861d771d873c/72799/three-columns.png\"\n        srcset=\"/static/b60945a7eee3aefafd38861d771d873c/12f09/three-columns.png 148w,\n/static/b60945a7eee3aefafd38861d771d873c/e4a3f/three-columns.png 295w,\n/static/b60945a7eee3aefafd38861d771d873c/72799/three-columns.png 320w\"\n        sizes=\"(max-width: 320px) 100vw, 320px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Getting started with theming</h2>\n<p>To get a fast start, we create a dummy theme base named <code>demotheme</code> that\nsimply re-uses styles and rules from Barceloneta, the default theme of\nPlone 5. Your theme base should contain the following files:</p>\n<ul>\n<li><code>./index.html</code></li>\n<li><code>./rules.xml</code></li>\n<li><code>./scripts.js</code></li>\n<li><code>./styles.css</code></li>\n<li><code>./manifest.cfg</code></li>\n</ul>\n<p>At first, <code>./index.html</code> is just a copy of the same theme file from\nBarceloneta:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\" cm-s-solarized\"><code><span>&lt;!doctype html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Plone Theme&lt;/title&gt;\n    &lt;link rel=\"shortcut icon\" type=\"image/x-icon\"\n          href=\"++theme++barceloneta/barceloneta-favicon.ico\" /&gt;\n    &lt;link rel=\"apple-touch-icon\"\n          href=\"++theme++barceloneta/barceloneta-apple-touch-icon.png\" /&gt;\n    &lt;link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\"\n          href=\"++theme++barceloneta/barceloneta-apple-touch-icon-144x144-precomposed.png\" /&gt;\n    &lt;link rel=\"apple-touch-icon-precomposed\" sizes=\"114x114\"\n          href=\"++theme++barceloneta/barceloneta-apple-touch-icon-114x114-precomposed.png\" /&gt;\n    &lt;link rel=\"apple-touch-icon-precomposed\" sizes=\"72x72\"\n          href=\"++theme++barceloneta/barceloneta-apple-touch-icon-72x72-precomposed.png\" /&gt;\n    &lt;link rel=\"apple-touch-icon-precomposed\" sizes=\"57x57\"\n          href=\"++theme++barceloneta/barceloneta-apple-touch-icon-57x57-precomposed.png\" /&gt;\n    &lt;link rel=\"apple-touch-icon-precomposed\"\n          href=\"++theme++barceloneta/barceloneta-apple-touch-icon-precomposed.png\" /&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;section id=\"portal-toolbar\"&gt;\n    &lt;/section&gt;\n    &lt;div class=\"outer-wrapper\"&gt;\n      &lt;header id=\"content-header\"&gt;\n        &lt;div class=\"container\"&gt;\n          &lt;header id=\"portal-top\"&gt;\n          &lt;/header&gt;\n          &lt;div id=\"anonymous-actions\"&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/header&gt;\n      &lt;div id=\"mainnavigation-wrapper\"&gt;\n        &lt;div id=\"mainnavigation\"&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div id=\"hero\" class=\"principal\"&gt;\n        &lt;div class=\"container\"&gt;\n          &lt;div class=\"gigantic\"&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div id=\"above-content-wrapper\"&gt;\n          &lt;div id=\"above-content\"&gt;\n          &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"container\"&gt;\n        &lt;div class=\"row\"&gt;\n          &lt;aside id=\"global_statusmessage\"&gt;&lt;/aside&gt;\n        &lt;/div&gt;\n        &lt;main id=\"main-container\" class=\"row row-offcanvas row-offcanvas-right\"&gt;\n          &lt;div id=\"column1-container\"&gt;\n          &lt;/div&gt;\n          &lt;div id=\"content-container\"&gt;\n          &lt;/div&gt;\n          &lt;div id=\"column2-container\"&gt;\n          &lt;/div&gt;\n        &lt;/main&gt;&lt;!--/row--&gt;\n      &lt;/div&gt;&lt;!--/container--&gt;\n    &lt;/div&gt; &lt;!--/outer-wrapper --&gt;\n    &lt;footer id=\"portal-footer-wrapper\"&gt;\n      &lt;div class=\"container\" id=\"portal-footer\"&gt;&lt;/div&gt;\n    &lt;/footer&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</span></code></pre>\n    </div>\n<p>Then, <code>./rules.xml</code> does nothing more than includes the existing rules\ndirectly from the always available Barceloneta theme:</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-meta\">&lt;?xml</span><span> </span><span class=\"cm-meta\">version=\"1.0\" encoding=\"UTF-8\"?&gt;</span><span>\n</span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">rules</span><span>\n</span><span>    </span><span class=\"cm-attribute\">xmlns</span><span>=</span><span class=\"cm-string\">\"http://namespaces.plone.org/diazo\"</span><span>\n</span><span>    </span><span class=\"cm-attribute\">xmlns:css</span><span>=</span><span class=\"cm-string\">\"http://namespaces.plone.org/diazo/css\"</span><span>\n</span><span>    </span><span class=\"cm-attribute\">xmlns:xsl</span><span>=</span><span class=\"cm-string\">\"http://www.w3.org/1999/XSL/Transform\"</span><span>\n</span><span>    </span><span class=\"cm-attribute\">xmlns:xi</span><span>=</span><span class=\"cm-string\">\"http://www.w3.org/2001/XInclude\"</span><span class=\"cm-tag bracket\">&gt;</span><span>\n\n</span><span>  </span><span class=\"cm-comment\">&lt;!-- Import Barceloneta rules --&gt;</span><span>\n</span><span>  </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">xi:include</span><span> </span><span class=\"cm-attribute\">href</span><span>=</span><span class=\"cm-string\">\"++theme++barceloneta/rules.xml\"</span><span> </span><span class=\"cm-tag bracket\">/&gt;</span><span>\n\n</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">rules</span><span class=\"cm-tag bracket\">&gt;</span></code></pre>\n    </div>\n<p>File <code>./scripts.js</code> starts empty and file <code>./styles.css</code> with the\nfollowing content to reuse styles from Barceloneta theme:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">@import</span><span> </span><span class=\"cm-string\">\"../++theme++barceloneta/less/barceloneta-compiled.css\"</span><span>;</span><span>\n\n</span><span class=\"cm-qualifier\">.plone-breadcrumb</span><span> </span><span class=\"cm-tag\">ol</span><span> {</span><span>\n</span><span>    </span><span class=\"cm-property\">padding</span><span>: </span><span class=\"cm-number\">18px</span><span> </span><span class=\"cm-number\">0</span><span>;</span><span>\n</span><span>    </span><span class=\"cm-property\">font-size</span><span>: </span><span class=\"cm-number\">14px</span><span>;</span><span>\n</span><span>}</span></code></pre>\n    </div>\n<p>They both should be registered as the implicit “theme bundle” (or\n“Diazo-bundle”) in <code>./manifest.cfg</code> by setting <code>production-css</code> and\n<code>production-js</code> attributes as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"properties\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-header\">[theme]</span><span>\n</span><span class=\"cm-def\">title </span><span>=</span><span class=\"cm-quote\"> Demo Theme</span><span>\n</span><span class=\"cm-def\">description </span><span>=</span><span>\n</span><span class=\"cm-def\">production-css </span><span>=</span><span class=\"cm-quote\"> /++theme++demotheme/styles.css</span><span>\n</span><span class=\"cm-def\">production-js </span><span>=</span><span class=\"cm-quote\"> /++theme++demotheme/scripts.js</span></code></pre>\n    </div>\n<p>Saving these files and enabling the theme should already give the basic\nBarceloneta experience. But let’s continue to extend it with our\nspecial feature…</p>\n<h2>Registering Masonry.js bundles</h2>\n<p>Plone 5 resource registry supports many ways to configure new front end\nresources. We go with the easy way by simply downloading the 3rd party\nJS distributions and registering them mostly as such for Plone with the\nfollowing steps:</p>\n<ol>\n<li>\n<p>Create folder <code>./bundles</code> into theme to keep the required front-end\nbundles separate from the other theme files</p>\n</li>\n<li>\n<p>Download <a href=\"https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js\">the official minified Masonry.js\ndistribution</a>\nand save it as <code>./bundles/masonry.pkgd.min.js</code></p>\n</li>\n<li>\n<p>Download <a href=\"https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js\">the official minified imagesLoaded\ndistribution</a>\nand save it as <code>./bundles/imagesloaded.pkgd.min.js</code></p>\n</li>\n<li>\n<p>Edit both of the previous files by adding line</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\" cm-s-solarized\"><code><span>(function() { var require, define;</span></code></pre>\n    </div>\n<p>into the beginning of the file, and line</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\" cm-s-solarized\"><code><span>})();</span></code></pre>\n    </div>\n<p>into the end of the file. These are required for any “AMD packaged”\nJS distribution to work in Plone’s Require.js based JS environment.</p>\n</li>\n<li>\n<p>Add two empty files <code>./bundles/masonry.pkgd.min.css</code> and\n<code>./bundles/imagesloaded.pkgd.min.css</code> for pleasing the Plone\nresource registry in the next step.</p>\n</li>\n<li>\n<p>Create folder <code>./install</code> with file <code>./install/registry.xml</code> with\nthe following contents to register the above bundles into Plone\nresource registry:</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-meta\">&lt;?xml</span><span> </span><span class=\"cm-meta\">version=\"1.0\"?&gt;</span><span>\n</span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">registry</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>  </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">records</span><span> </span><span class=\"cm-attribute\">prefix</span><span>=</span><span class=\"cm-string\">\"plone.bundles/imagesloaded-js\"</span><span>\n</span><span>           </span><span class=\"cm-attribute\">interface</span><span>=</span><span class=\"cm-string\">\"Products.CMFPlone.interfaces.IBundleRegistry\"</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"depends\"</span><span class=\"cm-tag bracket\">&gt;</span><span>plone</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"jscompilation\"</span><span class=\"cm-tag bracket\">&gt;</span><span>++theme++demotheme/bundles/imagesloaded.pkgd.min.js</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"csscompilation\"</span><span class=\"cm-tag bracket\">&gt;</span><span>++theme++demotheme/bundles/imagesloaded.pkgd.min.css</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"last_compilation\"</span><span class=\"cm-tag bracket\">&gt;</span><span>2017-10-06 00:00:00</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"compile\"</span><span class=\"cm-tag bracket\">&gt;</span><span>False</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"enabled\"</span><span class=\"cm-tag bracket\">&gt;</span><span>True</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>  </span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">records</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>  </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">records</span><span> </span><span class=\"cm-attribute\">prefix</span><span>=</span><span class=\"cm-string\">\"plone.bundles/masonry-js\"</span><span>\n</span><span>           </span><span class=\"cm-attribute\">interface</span><span>=</span><span class=\"cm-string\">\"Products.CMFPlone.interfaces.IBundleRegistry\"</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"depends\"</span><span class=\"cm-tag bracket\">&gt;</span><span>imagesloaded-js</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"jscompilation\"</span><span class=\"cm-tag bracket\">&gt;</span><span>++theme++demotheme/bundles/masonry.pkgd.min.js</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"csscompilation\"</span><span class=\"cm-tag bracket\">&gt;</span><span>++theme++demotheme/bundles/masonry.pkgd.min.css</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"last_compilation\"</span><span class=\"cm-tag bracket\">&gt;</span><span>2017-10-06 00:00:00</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"compile\"</span><span class=\"cm-tag bracket\">&gt;</span><span>False</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">value</span><span> </span><span class=\"cm-attribute\">key</span><span>=</span><span class=\"cm-string\">\"enabled\"</span><span class=\"cm-tag bracket\">&gt;</span><span>True</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">value</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>  </span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">records</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">registry</span><span class=\"cm-tag bracket\">&gt;</span></code></pre>\n    </div>\n</li>\n</ol>\n<p>Now, once edited theme files are saved and the theme re-activated or\nupdated, thanks to <strong>collective.themesitesetup</strong>, every response from\nour site should include our these new resources.</p>\n<h2>Creating a folder view with list of images</h2>\n<p>Creating a view with <strong>collective.themefragments</strong> is similar for\nwriting any view template for Plone. Simply add a folder <code>./fragments</code>\ninto your theme with our example view <code>./fragments/wall_of_images.pt</code>\nwith the following contents:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\" cm-s-solarized\"><code><span>&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\"\n      xmlns:tal=\"http://xml.zope.org/namespaces/tal\"\n      xmlns:metal=\"http://xml.zope.org/namespaces/metal\"\n      xmlns:i18n=\"http://xml.zope.org/namespaces/i18n\"\n      lang=\"en\"\n      metal:use-macro=\"context/main_template/macros/master\"\n      i18n:domain=\"plone\"&gt;\n&lt;body&gt;\n&lt;metal:main fill-slot=\"main\"&gt;\n  &lt;metal:content-core define-macro=\"content-core\"&gt;\n    &lt;div class=\"wall-of-images container-fluid\"\n         tal:define=\"items context/@@contentlisting\"&gt;\n      &lt;tal:image tal:repeat=\"item items\"&gt;\n        &lt;img tal:define=\"obj item/getObject;\n                         scale_func obj/@@images;\n                         scaled_image python:scale_func.scale('image', scale='preview')\"\n             tal:replace=\"structure python:scaled_image.tag()\"\n             tal:on-error=\"string:error\" /&gt;\n      &lt;/tal:image&gt;\n    &lt;/div&gt;\n  &lt;/metal:content-core&gt;\n&lt;/metal:main&gt;\n&lt;/body&gt;\n&lt;/html&gt;</span></code></pre>\n    </div>\n<p>Please, note, how the view template uses\n<a href=\"https://pypi.python.org/pypi/plone.app.contentlisting\">plone.app.contentlisting</a>\nAPI for iterating through every item in the folder and then\n<a href=\"https://pypi.python.org/pypi/plone.app.imaging\">plone.app.imaging</a> API\nfor rendering image tags for scaled images. Also, note the use of\n<code>tal:on-error</code> to suppress all possible error messages (you may not\nalways want that, though).</p>\n<h2>Enabling the view on a site</h2>\n<p>Unfortunately, <strong>collective.themefragments</strong>’ views do not magically\nappear into Plone toolbar display menu yet. Fortunately, those views can\nbe either be set as the default view of a content type or manually\nassigned to a content item by setting its <code>layout</code>-property:</p>\n<ol>\n<li>\n<p>At first, let’s assume that we have a folder</p>\n<p><code>http://localhost:8080/Plone/wall-of-images</code></p>\n</li>\n<li>\n<p>Then, let’s open the good old properties edit form for it</p>\n<p><code>http://localhost:8080/Plone/wall-of-images/manage_propertiesForm</code></p>\n</li>\n<li>\n<p>Finally, let’s add a new property of type <code>string</code> with name\n<code>layout</code> and value <code>++themefragment++wall_of_images</code></p>\n</li>\n</ol>\n<p>Now the content should be rendered using our brand new template,\ndisplaying all the images one after one. It still does not look as\nintended, though, because nothing enables Masonry.js for it.</p>\n<h2>Invoking Masonry.js on the view</h2>\n<p>To enable Masonry.js on our brand new view, we could add the following\ncode into a theme file <code>./scripts.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\" cm-s-solarized\"><code><span>jQuery(function($) {\n  $('.wall-of-images').imagesLoaded(function() {\n    $('.wall-of-images').masonry({\n      itemSelector: 'img',\n      percentPosition: true\n    });\n  });\n});</span></code></pre>\n    </div>\n<p>That code simply uses jQuery to find our view templates main element and\nconfigures Masonry.js for it after every image below it has been loaded.</p>\n<p>An alternative for that jQuery script would be to rely on Plone’s\nRequire.js setup and define the code as a pattern:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\" cm-s-solarized\"><code><span>require([\n  'pat-base'\n], function(Base) {\n  'use strict';\n\n  var Masonry = Base.extend({\n    name: 'masonry',\n    trigger: '.wall-of-images',\n\n    init: function() {\n      var self = this;\n      self.$el.imagesLoaded(function() {\n        self.$el.masonry({\n          itemSelector: 'img',\n          percentPosition: true\n        });\n      });\n    }\n  });\n\n  return Masonry;\n});</span></code></pre>\n    </div>\n<p>But something is still missing. Masonry.js is distributed without any\ndefault styles. To make our wall of images look as it should, we need to\ndefine responsive styles with our desired breakpoints in <code>./styles.css</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-def\">@media</span><span> </span><span class=\"cm-keyword\">only</span><span> </span><span class=\"cm-attribute\">screen</span><span> {</span><span>\n</span><span>   </span><span class=\"cm-qualifier\">.wall-of-images</span><span> {</span><span>\n</span><span>        </span><span class=\"cm-property\">padding-left</span><span>: </span><span class=\"cm-number\">0</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">padding-right</span><span>: </span><span class=\"cm-number\">0</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">margin-top</span><span>: </span><span class=\"cm-number\">-20px</span><span>;</span><span>\n</span><span>    }</span><span>\n</span><span>    </span><span class=\"cm-qualifier\">.wall-of-images</span><span> </span><span class=\"cm-tag\">img</span><span> {</span><span>\n</span><span>        </span><span class=\"cm-property\">float</span><span>: </span><span class=\"cm-atom\">left</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">width</span><span>: </span><span class=\"cm-number\">100%</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">height</span><span>: </span><span class=\"cm-atom\">auto</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">border</span><span>: </span><span class=\"cm-number\">5px</span><span> </span><span class=\"cm-atom\">solid</span><span> </span><span class=\"cm-atom\">transparent</span><span>;</span><span>\n</span><span>    }</span><span>\n</span><span>}</span><span>\n\n</span><span class=\"cm-def\">@media</span><span> </span><span class=\"cm-keyword\">only</span><span> </span><span class=\"cm-attribute\">screen</span><span> </span><span class=\"cm-keyword\">and</span><span> (</span><span class=\"cm-property\">min-width</span><span>: </span><span class=\"cm-number\">768px</span><span>) {</span><span>\n</span><span>    </span><span class=\"cm-qualifier\">.wall-of-images</span><span> </span><span class=\"cm-tag\">img</span><span> {</span><span>\n</span><span>        </span><span class=\"cm-property\">float</span><span>: </span><span class=\"cm-atom\">left</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">width</span><span>: </span><span class=\"cm-number\">50%</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">height</span><span>: </span><span class=\"cm-atom\">auto</span><span>;</span><span>\n</span><span>    }</span><span>\n</span><span>}</span><span>\n\n</span><span class=\"cm-def\">@media</span><span> </span><span class=\"cm-attribute\">screen</span><span> </span><span class=\"cm-keyword\">and</span><span> (</span><span class=\"cm-property\">min-width</span><span>: </span><span class=\"cm-number\">900px</span><span>) {</span><span>\n</span><span>    </span><span class=\"cm-qualifier\">.wall-of-images</span><span> </span><span class=\"cm-tag\">img</span><span> {</span><span>\n</span><span>        </span><span class=\"cm-property\">float</span><span>: </span><span class=\"cm-atom\">left</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">width</span><span>: </span><span class=\"cm-number\">33.3333333%</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">height</span><span>: </span><span class=\"cm-atom\">auto</span><span>;</span><span>\n</span><span>    }</span><span>\n</span><span>}</span><span>\n\n</span><span class=\"cm-def\">@media</span><span> </span><span class=\"cm-attribute\">screen</span><span> </span><span class=\"cm-keyword\">and</span><span> (</span><span class=\"cm-property\">min-width</span><span>: </span><span class=\"cm-number\">1200px</span><span>) {</span><span>\n</span><span>  </span><span class=\"cm-qualifier\">.wall-of-images</span><span> </span><span class=\"cm-tag\">img</span><span> {</span><span>\n</span><span>        </span><span class=\"cm-property\">float</span><span>: </span><span class=\"cm-atom\">left</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">width</span><span>: </span><span class=\"cm-number\">25%</span><span>;</span><span>\n</span><span>        </span><span class=\"cm-property\">height</span><span>: </span><span class=\"cm-atom\">auto</span><span>;</span><span>\n</span><span>    }</span><span>\n</span><span>}</span></code></pre>\n    </div>\n<p>Finally, we’d like to make our wall of images be displayed on full\nbrowser window width. That’s a bit tricky, because we need to escape\nBarceloneta theme’s default content container, but still fully possible\nby adding the following Diazo rules into <code>./rules.xml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\">\n      <pre class=\" cm-s-solarized\"><code><span class=\"cm-comment\">&lt;!-- Wall of Images --&gt;</span><span>\n</span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">rules</span><span> </span><span class=\"cm-attribute\">css:if-content</span><span>=</span><span class=\"cm-string\">\".wall-of-images\"</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>  </span><span class=\"cm-comment\">&lt;!-- Make fullwidth --&gt;</span><span>\n</span><span>  </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">replace</span><span> </span><span class=\"cm-attribute\">css:theme</span><span>=</span><span class=\"cm-string\">\".outer-wrapper &gt; .container\"</span><span>\n</span><span>           </span><span class=\"cm-attribute\">css:content</span><span>=</span><span class=\"cm-string\">\".wall-of-images\"</span><span> </span><span class=\"cm-tag bracket\">/&gt;</span><span>\n</span><span>  </span><span class=\"cm-comment\">&lt;!-- Include status message --&gt;</span><span>\n</span><span>  </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">before</span><span> </span><span class=\"cm-attribute\">css:theme</span><span>=</span><span class=\"cm-string\">\".outer-wrapper &gt; .container\"</span><span>\n</span><span>          </span><span class=\"cm-attribute\">css:content</span><span>=</span><span class=\"cm-string\">\"#global_statusmessage\"</span><span>\n</span><span>          </span><span class=\"cm-attribute\">css:if-content</span><span>=</span><span class=\"cm-string\">\".wall-of-images\"</span><span> </span><span class=\"cm-tag bracket\">/&gt;</span><span>\n</span><span>  </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">replace</span><span> </span><span class=\"cm-attribute\">css:content</span><span>=</span><span class=\"cm-string\">\"#global_statusmessage\"</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">div</span><span> </span><span class=\"cm-attribute\">id</span><span>=</span><span class=\"cm-string\">\"global_statusmessage\"</span><span> </span><span class=\"cm-attribute\">class</span><span>=</span><span class=\"cm-string\">\"container-fluid\"</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>      </span><span class=\"cm-tag bracket\">&lt;</span><span class=\"cm-tag\">xsl:apply-templates</span><span> </span><span class=\"cm-tag bracket\">/&gt;</span><span>\n</span><span>    </span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">div</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span>  </span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">replace</span><span class=\"cm-tag bracket\">&gt;</span><span>\n</span><span class=\"cm-tag bracket\">&lt;/</span><span class=\"cm-tag\">rules</span><span class=\"cm-tag bracket\">&gt;</span></code></pre>\n    </div>\n<p>Now our wall of images shines in every resolution:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 320px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/116820fb920bbf26f24dd476a463143d/72799/four-columns.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAEhUlEQVQ4y0WOWVBTdxTG7zgqqG1n7LS1Y2ccqwMP+tCZjmPR4VLrTOtSrYhLsaEiEIqIyFATFglKYtkMazBsRhOrAmJUCGEZFhET2cIaCyEsIXCDLHoRRW1LvP+vF1/68M13zu+cOeejeo3GDTarWT01OamZcjjUjH1cYx8d1ziYCc3ExKSG4d02Oqbp6x/QjI0xmomnUxoHz0f5Hbud0YyM2NWLc/sYo25pbd9AMZYnO8YdUxhkpjHsmMbMMxZv51/iDa93b+ax8GoO/758gX/mZt/XHM+cr+fxN9+/YZ/h3etXeDv7HHPTT2Hp7d5BKSubPBVG68Ktdpuzusu+8LDP4XwyOuPsGHzqLO2xO4t7xpy3e8edJbwW62KeFXXbnTc6bU51y4DzZqdt4WbniPN62+CCQm/wpE7k3KbP6dpJfl0XKg295F5jF8ofmVHVNoR4fQdEZa0Q3WuGuKwN0bp2xOhMiKnogPh+K2IrTIgqbyPRi0xnIgH8LarbWEszf7UTx0APxgfMZH5mEkP93ai4rUHXg2qM9powy9jwkhnGhMWM8f4e2Nqb8HbaDsZqwcxgH2Ft/ehrM5AuQwNN3Sm9TsedCSOX5QpclitJbnohLsqk+G77VoQHhSLrUjasA/3w3ucDUVgY8rPTceLoYaQmxCMi5DTK7mpJklSGAmUhaXxQT1OJ56Jp9y83kc8/3Yj1a9yJ+/rN8PP2waZ167HSZTU+WvkxBAe8cfK4L6SRAciQxUIcdBwxERHw2PwVcpNiSYrsHJJjI0lGopSm7ubJ6Ui/o+Twjz9BKPAncSIxCvgUgb5H4ON9CEcOHoI0JgplRQV8KhEuy0RQJkRBkZ2NkIAglF9NIfqSAuQkS0iJKoumLiXLaElUOMlTpEKtyiO1dTWwTThQ11gHk7EWjN0C69goDD1PoK2qQmmFDnUtzWjt7oSh+REKVLnkiuoKLIP9xDw0TFMpyQl0tDicxMWI4b17LwkKPgV9TSW09++gtlKL1pYmWIetKC26ivuVFaivLcfjThM6zL3IzJBDcERAfPZ5I0ehIC19Fpq6cF5Cy6TniSQuDiHCYJJTqEG5Xoc0eRJChUL4H/PjH9RAkZmC/EIlVHlZaGx+DOvIEJobG3Ba+Bs5dtgXFyUSotXpaUp1TUU3GA2cua+TtJkeci/m5zhDYzV3szCXC/YP5nZu8+RSkpM5pTKTS0tN4rw8aE76RyJnbGrgIk+Gcl97+XAhwlASeiqCOxp0lqZu3VB7lWiLkZWZjgD/QBQXF6O+rgonfPbDY/su7N97AGfE8UhLTUSgQIAtWzwhDPsdqiv58PvZD3sOHod/QDDCYhIhv1HrRZX+me9Rrdc+j5ckzP7gtYONOBXOytPT2G+3fsPu3b2P3fX9HjbqQiobFnqS3bZ1G0t77WSDTkexGRmZ7C+/BrOis+GsryBwNq2g6LnqWp4HtYSiXL9Yu3bj6s/WuC93WeZGUdR7ua74wG2Zy1I3fu62ivdFttx1hdvSpUvcVri6/L/nsnzR3Zet+nCj+7pPXP8DciwIAW0ANY8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/116820fb920bbf26f24dd476a463143d/72799/four-columns.png\"\n        srcset=\"/static/116820fb920bbf26f24dd476a463143d/12f09/four-columns.png 148w,\n/static/116820fb920bbf26f24dd476a463143d/e4a3f/four-columns.png 295w,\n/static/116820fb920bbf26f24dd476a463143d/72799/four-columns.png 320w\"\n        sizes=\"(max-width: 320px) 100vw, 320px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 320px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b60945a7eee3aefafd38861d771d873c/72799/three-columns.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 96.62162162162163%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAAFYklEQVQ4y5WUi09TVxzHb0w2FzO3RQfXxGVbtmTGZS5qJCrDIaLCRBQoDBBES4FKBGp5TBTbMphTqFRBiyjqBHmMh7wp5VEeF+RRy8sXirSUltbLKPjONujtdxfn/oCd5JPfK+ebX875nUNUpFxdrL+rEY8ZtZlPpy0ZUyazjDY/kdFPaJnFYpHNzszK/piakum0OtkTNv90dlY2PW2RTRom32A0GDPYfCbri+UX5IuJiNBwO51W+9owacLouBGjOiMmDCaYzU8wyeb0+gnoxycwNqaDVqeHwWjCpGmhZn7DOFubMExidHTsta+vnx3BDw8jgXkT2DVomJ27Z342P2CcndcYZuZhY+YB21vwL8zcPP56xdbm3sS2V8/m2Jh1rSY+L5QkVm33sj9Q3EXzbqpxoKSX+bVhyFbR+dD2e8eIrZR68IYylvgqjS2krM92sLTXFlzUZQsq7LRx2Ti0XM2wYEFj1Q5ve2K9mxeZVNFFi2rUOKXsZ3Kb+1HfOYTajkEobt2FsucBVJpRyBr7IapTQ1LbhxPVvRCxVlTTC0mdmhHXa3DsZie9bscekuAGBZAW3T36lXkME/cHmCndCMy6R3gxQ2NY3YFuVT26WhTQ3b0N7WAfLGwNf78AXlrAPJvGS7OemTNr8efUOB3JHh8h/ElIll6X0+VXc6Bub2P6u3qgKKqAyWhGrICP6NAgZKedRuHlK9A+HmMvxYhz6WkQHorElZwcZEpPM/H8MFSXXKcPR0WRRLo0lYwI2U/vdHJDGFfA+HN42OPmCz5PgACOF9as+houTjvwnYMzRMd/RquiBmvXOsLP3Q152VJknZQw3ttdcUIYTbe2K9kOw7mks8NmeskSO9gtXcGs/PhLfLp8JTZv2ALB/kB8teITvPvOh1j63vssH8GfFRLHR+J4ZCAyT8Yj9Vg8ExcSiLzci/Q+b1eSSEk6Ql6SJNKcHzzhu8uL8fHwQah/AI7HxSPp0H7sdPgW69c6sF1uhYujE8SxMagqOI/jAh5+iQuFLJ7LJIb44LfsTPpIDI8k+JGR5KDmNq1qbIaG6mDGhtWgVEo01VUiW5qMNEksCm7kQtWsQG9fF8bZoR5lB7mlrQmabhVGhnoY3fgjqIcGaE9PT5IICvYn93n50nGHDkPVpGRyzkoRwxegoaYOaWfScCRWiOzzGYjmR4DHDYV6cAC1NeVobm9Fe0MF7mkoxmCawMD9+7SnhztJeO/1JL13etC7v3dBftYpRpqRBvnpZJyTSpGeLESC8DCSEoRw3uKKbS47UdPShvwb11CjqENtdTEKrl9iBof78Uivp11dtpJESACHXP2NA73ms8+RnxrFFMlTwA/mIDkqCIkJcRCJJeBH8MHx4SA67hga2juQk3MBaeknEXGQC3dXd0aUmIi+4WE6jMsliYU2s+QX6eK8q6gqzmbUVDVUymq0NtZhYFSLqqZG1Le1Q8EK3RoawtDDERRdyURVSTESYmKxxWEj47d7L67l59GxEjFJuG9ztle2Npk1d/pxOVc+f+Z8tvVmRZl1+vmMtUdz21rZorIWlJVYS6orrZWNSus9rdaan3PGmpkqse7zP2DdtHHrfAyPh7DoWHNh2Q17IiTQj8wrzHsuZV9DMCcAft4BOBIeAYWyHrlnRaiorUJ9dSludzVCfWcQj9kv7VTyCbht2oAvVm+E87Zd2LPXDwJxxvNs+RmS8Pf3XXZJnlF+VBDT7bp1e4ezoyPl4epGicQplFh0lDqWlEjJzqZR8qx0qqC8jKpraqZ+5HCozevWUz5evpSrk2PHXu+gbkGipDw4OGgZwa5FLB+wfMyy/K39P/y3Z0Fj0T9G97v8HUsU2gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/b60945a7eee3aefafd38861d771d873c/72799/three-columns.png\"\n        srcset=\"/static/b60945a7eee3aefafd38861d771d873c/12f09/three-columns.png 148w,\n/static/b60945a7eee3aefafd38861d771d873c/e4a3f/three-columns.png 295w,\n/static/b60945a7eee3aefafd38861d771d873c/72799/three-columns.png 320w\"\n        sizes=\"(max-width: 320px) 100vw, 320px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 279px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dade4abcb5d7269cc20a6a3b02fec336/3af37/two-columns.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 114.86486486486487%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/dade4abcb5d7269cc20a6a3b02fec336/3af37/two-columns.png\"\n        srcset=\"/static/dade4abcb5d7269cc20a6a3b02fec336/12f09/two-columns.png 148w,\n/static/dade4abcb5d7269cc20a6a3b02fec336/3af37/two-columns.png 279w\"\n        sizes=\"(max-width: 279px) 100vw, 279px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 196px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e7052382f26941ecd434f1d1a0bd9a8c/ad4c1/one-column.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 163.51351351351354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/e7052382f26941ecd434f1d1a0bd9a8c/ad4c1/one-column.png\"\n        srcset=\"/static/e7052382f26941ecd434f1d1a0bd9a8c/12f09/one-column.png 148w,\n/static/e7052382f26941ecd434f1d1a0bd9a8c/ad4c1/one-column.png 196w\"\n        sizes=\"(max-width: 196px) 100vw, 196px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>PS. If want to learn more, my <a href=\"https://github.com/datakurre/ploneconf2017\">talk\nmaterials</a> include a more\ncomplex example with custom content types, workflows, permissions,\nportlet assignments and content rules.</p>","frontmatter":{"title":"Building instant features with advanced Plone themes","tags":["Chameleon","Plone","RequireJS","Templating","Theming"],"date":"October 23, 2017","published":"2017-10-23 06:00:00"}}},"pageContext":{"slug":"/2017/10/building-instant-features-with-advanced.html/","previous":{"fields":{"slug":"/2017/02/tile-based-layouts-and-esi-on-plone.html/"},"frontmatter":{"title":"Tile based layouts and ESI on Plone"}},"next":{"fields":{"slug":"/2017/11/plone-conference-barcelona-2017.html/"},"frontmatter":{"title":"Plone Conference Barcelona 2017"}}}},"staticQueryHashes":["63159454"],"slicesMap":{}}